
# ETL Conventions for use with PEDSnet CDM v4.6 OMOP V5.4

The PEDSnet Common Data Model is an evolving specification, based in structure on the OMOP Common Data Model, but expanded to accommodate requirements of both the PCORnet Common Data Model and the primary research cohorts established in PEDSnet.

Version 4.6 of the PEDSnet CDM reflects the ETL processes developed after several iterations of network development. As such, it proposes to align with version 6.0 of the PCORnet CDM.

This document provides the ETL processing assumptions and conventions developed by the PEDSnet data partners that should be used by a data partner for ensuring common ETL business rules. This document will be modified as new situations are identified, incorrect business rules are identified and replaced, as new analytic use cases impose new/different ETL rules, and as the PEDSnet CDM continues to evolve.

Comments on this specification and ETL rules are welcome. Please send email to pedsnetdcc@email.chop.edu, or contact the PEDSnet project management office (details available via http://www.pedsnet.info).

#### PEDSnet Data Standards and Interoperability Policies:
 
1. The PEDSnet data network will store data using structures compatible with the PEDSnet Common Data Model (PCDM).

2. The PEDSnet CDM v4.6 is based on the Observational Medical Outcomes Partnership (OMOP) data model, version 5.4. 

3. A subset of data elements in the PCDM will be identified as principal data elements (PDEs). The PDEs will be used for population-level queries. Data elements which are NOT PDEs will be marked as Optional (ETL at site discretion) or Non-PDE (ETL required, but data need not be transmitted to DCC), and will not be used in queries without prior approval of site.

4. It is anticipated that PEDSnet institutions will make a good faith attempt to obtain as many of the data elements not marked as Optional as possible.

5. The data elements classified as PDEs and those included in the PCDM will be approved by the PEDSnet Executive Committee (comprised of each PEDSnet institution's site principal investigator).

6. Concept IDs are taken from OMOP 5 vocabularies for PEDSnet CDM v4.6, using the complete (restricted) version that includes licensed terminologies such as CPT and others.

7. PCORnet CDM v6.0 requires data elements that are not currently considered "standard concepts". Vocabulary version 5 has a new vocabulary (vocabulary_id=PCORNet) that was added by OMOP to capture all of the PCORnet concepts that are not in the standard terminologies. We use concept_ids from vocabulary_id=PCORNet where there are no existing standard concepts. We highlight where we are pulling concept_ids from vocabulary_id=PCORNet in the tables. While terms from vocabulary_id=PCORNet violates the OMOP rule to use only concept_ids from standard vocabularies vocabulary_id=PCORNet is a non-standard vocabulary), this convention enables a clean extraction from PEDSnet CDM to PCORnet CDM.

8. Some source fields may be considered sensitive by data sites. Potential examples include patient_source_value, provider_source_value, care_site_source_value. Many of these fields are used to generate an ID field, such as PERSON.patient_source_value PERSON.person_id, that is used as a primary key in PERSON and a foreign key in many other tables. Sites are free to obfuscate or not provide source values that are used to create ID variables. Sites must maintain a mapping from the ID variable back to the original site-specific value for local re-identification tasks.

    1. Source fields that contain clinical data, such as source condition occurrence, should be included

    2. The PEDSnet DCC will never release source values to external data partners.

    3. Source value obfuscation techniques may include replacing the real source value with a random number, an encrypted derivative value/string, or some other site-specific algorithm.

9. The PCORnet CDM has specific definitons for null values (as seen below). For the PEDSNet CDM, please use the following logic on which concept value to use for `source_concept_id` fields where there are null values in the source `*_source_value`.

Null Name | Definition of each field
 --- | ---
NULL | A data field is not present in the source system. Note. This is not a 'NULL' string but the NULL value.
'NI' = No Information | A data field is present in the source system, but the source value is null or blank
'UN' = Unknown | A data field is present in the source system, but the source value explicitly denotes an unknown value
'OT' = Other | A data field is present in the source system, but the source value cannot be mapped to the CDM

Guidelines for populating `'*_concept_id'`,`'*_source_concept_id'`  and `'*_source_value'` for flavors of null:

Null Name| '*_concept_id' |'*_source_concept_id'| '*_source_value'
--- | ---| --- |---
'NI'|	44814650|	0|	value as in source (leave as null)
'UN'|	44814653	|0|	value as in source (denoting an unknown value)
'OT'|	44814649	|0|	value as in source

10.
**For populating `'*_source_concept_id'` (where there exists non-null values in the source) use the following Logic :**

  **Populate `'*_source_concept_id'` (i.e. non-zero) if the source_value is drawn from a standard vocabulary in OMOP**.
       
Please use your local system knowledge to determine this or use the following criteria : All the values in the source_value field should be drawn from the concept_code in the concept table (for a given/relevant domain_id and a given vocabulary_id).
    
  **ELSE Use 0** 
      
 (usually the case when the sites need to "manually" map the foo_source_value to foo_concept_id)

11.
**For populating `*_source_value` please make a best effort to provide "human readable" values rather than a coded value where possible from the source.**

  Example for `gender_source_value`, the source value at your site may be `1` for Female and `2` for Male. Please provide the label value of `Female` and `Male`.
 

***ETL Recommendation:*** Due to PK/FK constraints, the most efficient order for ETL table is location, care_site, provider, person, visit_occurrence, condition_occurrence, observation, procedure_occurrence,measurement,measurement_organism,drug exposure

* * *
## Table of Contents

#### [1.1 Person](PEDSnet_CDM_ETL_Conventions.md#11-person-1)

#### [1.2 Death](PEDSnet_CDM_ETL_Conventions.md#12-death-1)

#### [1.3 Location](PEDSnet_CDM_ETL_Conventions.md#13-location-1)

#### [1.4 Care Site](PEDSnet_CDM_ETL_Conventions.md#14-care_site)

#### [1.5 Provider](PEDSnet_CDM_ETL_Conventions.md#15-provider-1)

#### [1.6 Visit Occurrence ](PEDSnet_CDM_ETL_Conventions.md#16-visit_occurrence)

#### [1.7 Condition Occurrence](PEDSnet_CDM_ETL_Conventions.md#17-condition_occurrence)

#### [1.8 Procedure Occurrence](PEDSnet_CDM_ETL_Conventions.md#18-procedure_occurrence)

#### [1.9 Observation](PEDSnet_CDM_ETL_Conventions.md#19-observation-1)

#### [1.10 Observation Period](PEDSnet_CDM_ETL_Conventions.md#110-observation-period-1)

#### [1.11 Drug Exposure](PEDSnet_CDM_ETL_Conventions.md#111-drug-exposure-1)

#### [1.12 Measurement](PEDSnet_CDM_ETL_Conventions.md#112-measurement-1)

#### [1.13 Fact Relationship](PEDSnet_CDM_ETL_Conventions.md#113-fact-relationship-1)

#### [1.14 Visit Payer](PEDSnet_CDM_ETL_Conventions.md#114-visit_payer)

#### [1.15 Measurement Organism](https://github.com/PEDSnet/Data_Models/blob/master/PEDSnet/docs/PEDSnet_CDM_ETL_Conventions.md#115-measurement_organism)

#### [1.16 ADT Occurrence](https://github.com/PEDSnet/Data_Models/blob/master/PEDSnet/docs/PEDSnet_CDM_ETL_Conventions.md#116-adt_occurrence)

#### [1.17 Immunization](https://github.com/PEDSnet/Data_Models/blob/master/PEDSnet/docs/PEDSnet_CDM_ETL_Conventions.md#117-immunization-1)

#### [1.18 Device Exposure](PEDSnet_CDM_ETL_Conventions.md#118-device_exposure)

#### [1.19 Location History](PEDSnet_CDM_ETL_Conventions.md#119-location_history)

#### [1.20 Hash Token](PEDSnet_CDM_ETL_Conventions.md#120-hash_token)

#### [1.21 Specialty](PEDSnet_CDM_ETL_Conventions.md#121-specialty-1)

#### [Appendix](PEDSnet_CDM_ETL_Conventions.md#a1-abms-specialty-category-to-omop-v5-specialty-mapping)

* * *
#### Data Extraction Guide
Please use the table headings as a guide in extracting and submitting data. These specifications are indicative of DCC and Network Requirements. All fields must be submitted to the DCC even if you are not submitting data in a field. Here are examples of how the specification should be interpreted:

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
 Field Name | <ul><li>Yes</li></ul>|<ul><li>Yes</li></ul>| Data Type | Description| PEDSnet Conventions
 
 - **The above example indicates the data in this field is required by both the DCC and Network. It absolutely must be provided in the data submission.**
 
Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
 Field Name | <ul><li>No</li></ul>|<ul><li>Provide When Available</li></ul>| Data Type | Description| PEDSnet Conventions
 
 - **The above example indicates the data in this field is required by Network if it is populated or available at your site. If it is available it must provided in the data submission.**
 
Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
 Field Name | <ul><li>No</li></ul>|<ul><li>Site Preference</li></ul>| Data Type | Description| PEDSnet Conventions
 
 - **The above example indicates the data in this field is not required by the DCC or Network. A site may choose to send this information if they desire to do so.**
 
Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
 Field Name | <ul><li>No</li></ul>|<ul><li>Optional</li></ul>| Data Type | Description| PEDSnet Conventions
 
 - **The above example indicates the data in this field is truly optional for submission. A site may choose to send this information if they desire to do so.**

* * *
## 1.1 PERSON

The person domain contains records that uniquely identify each patient in the source data who is time at-risk to have clinical observations recorded within the source systems. Each person record has associated demographic attributes, which are assumed to be constant for the patient throughout the course of their periods of observation. All other patient-related data domains have a foreign-key reference to the person domain.

PEDSnet uses a specific definition of an active PEDSnet patient. Only patients who meet the PEDSnet definition of an active patient should be included in this table. The criteria for identifying an active patient are:

- Has a unique identifier AND

- At least 1 "in person" clinical encounter on or after January 1, 2009 AND

- At least 1 coded diagnoses recorded on or after January 1, 2009 AND

- Is not a test patient or a research-only patient

The definition of an "in person" clinical encounter remains heuristic -any encounter type that involves a meaningful \*\*physical\*\* interaction with a clinician that involved clinical content. An encounter for a telephone encounter or a lab blood draw does not meet this definition.

For reference `Visit_concept_ids` that correspond to an "in person" clinical encounter are:

Visit Type | Visit_concept_id
---| ---
Inpatient Hospital Stay | 9201
Ambulatory/Outpatient Visit (With a Physician) | 9202
Outpatient Non Physician | 2000000469 
Emergency Department | 9203
Long Term Care Visit | 42898160
Non-Acute Institutional Stay | 44814710
Emergency Department Admit to Inpatient Hospital Stay (If sites are unable to split the encounter) | 2000000048
Observation Stay | 2000000088
Interactive Telemedicine Service|581399

**NOTE: While the 1/1/2009 date and "in person" clinical encounter restrictions apply to defining an active PEDSnet patient, once a patient has met this criteria, PEDSnet will extract *ALL* available clinical encounters/clinical data of any type across all available dates. That is, 1/1/2009 and 1 'in person' clinical encounter applies only to defining the active patient cohort. It does NOT apply to data extraction on active patients.**

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`person_id` | Yes | Yes| BigInteger | A unique identifier for each person; this is created by each contributing site. | <p>This is not a value found in the EHR.</p> PERSON_ID must be unique for all patients within a single data set.</p><p>**SITE RESPONSIBILITY: This field must remain a stable identifier across submissions to the DCC.**</p> <p>A mapping from the person_id to a real patient ID or MRN from the source EHR must be kept at the local site. This mapping is not shared with the data coordinating center. It is used only by the site for re-identification for study recruitment or for data quality review.</p>
`gender_concept_id` | Yes |Yes|  Integer |  A foreign key that refers to a standard concept identifier in the Vocabulary for the gender of the person. | Please include valid concept ids (consistent with OMOP CDMv5.4). Predefined value set (valid concept_ids found in CONCEPT table select \* from concept where ((domain_id='Gender' and concept_class_id='Gender')or (domain_id='Observation' and vocabulary_id='PCORNet' and concept_class_id in ('Gender','Undefined'))) and concept_code not in ('Sex-F','Sex-M') and invalid_reason is null: <ul><li>Ambiguous: concept_id = 44814664 </li> <li>Female: concept_id = 8532</li> <li>Male: concept_id = 8507</li> <li>No Information: concept_id = 44814650 (Vocabulary_id='PCORNet')</li> <li>Unknown: concept_id = 44814653</li> <li>Other: concept_id = 44814649</li></ul>
`gender_source_concept_id` | Yes | Yes|  Integer | A foreign key to the gender concept that refers to the code used in the source.|  <p>**If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0**</p>
`year_of_birth` | Yes |Yes|  Integer |  The year of birth of the person. | <p>For data sources with date of birth, the year is extracted. For data sources where the year of birth is not available, the approximate year of birth is derived based on any age group categorization available.</p> Please keep all accurate/real dates (No date shifting)
`month_of_birth` | No |Provide When Available|  Integer | The month of birth of the person. | <p>For data sources that provide the precise date of birth, the month is extracted and stored in this field.</p> Please keep all accurate/real dates (No date shifting)
`day_of_birth` | No |Provide When Available|  Integer | The day of the month of birth of the person. | <p>For data sources that provide the precise date of birth, the day is extracted and stored in this field.</p> Please keep all accurate/real dates (No date shifting)
`birth_date` | No |Provide When Available|  Date |  The birth date | Full date. Please keep all accurate/real dates (No date shifting).
`birth_datetime` | No |Provide When Available|  Datetime |  The birth date and time | <p>Do not include timezone.</p> Please keep all accurate/real dates (No date shifting). If there is no time associated with the date assert midnight.
`race_concept_id` | Yes |Yes|  Integer |  A foreign key that refers to a standard concept identifier in the Vocabulary for the race of the person. | Details of categorical definitions: <ul><li>**-American Indian or Alaska Native**: A person having origins in any of the original peoples of North and South America (including Central America), and who maintains tribal affiliation or community attachment.</li> <li>**-Asian**: A person having origins in any of the original peoples of the Far East, Southeast Asia, or the Indian subcontinent including, for example, Cambodia, China, India, Japan, Korea, Malaysia, Pakistan, the Philippine Islands, Thailand, and Vietnam.</li> <li>**-Black or African American**: A person having origins in any of the black racial groups of Africa.</li> <li>**-Native Hawaiian or Other Pacific Islander**: A person having origins in any of the original peoples of Hawaii, Guam, Samoa, or other Pacific Islands.</li> <li>**-White**: A person having origins in any of the original peoples of Europe, the Middle East, or North Africa.</li></ul> <p>For patients with multiple races (i.e. biracial), race is considered a single concept, meaning there is only one race slot. If there are multiple races in the source system, concatenate all races into one race_source_value (see below) and use concept_id code as 'Multiple Race.'</p> Predefined values (valid concept_ids found in CONCEPT table where ((domain_id='Race' and vocabulary_id = 'Race') or (vocabulary_id='PCORNet' and concept_class_id='Undefined') or concept_id in (44814659,44814660)) and invalid_reason is null: <ul><li>American Indian/Alaska Native: concept_id = 8657</li> <li>Asian: concept_id = 8515</li> <li>Black or African American: concept_id = 8516</li> <li>Native Hawaiian or Other Pacific Islander: concept_id = 8557</li> <li>White: concept_id = 8527</li> <li>Multiple Race: concept_id = 44814659 (vocabulary_id='PCORNet')</li> <li>Refuse to answer: concept_id = 44814660 (vocabulary_id='PCORNet')</li> <li>No Information: concept_id = 44814650 vocabulary_id='PCORNet')</li> <li>Unknown: concept_id = 44814653</li> <li>Other: concept_id = 44814649</li></ul>
`race_source_concept_id`| Yes |Yes|  Integer| A foreign key to the race concept that refers to the code used in the source.| <p>**If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0**</p>
`ethnicity_concept_id` | Yes | Yes|  Integer | A foreign key that refers to the standard concept identifier in the Vocabulary for the ethnicity of the person. | <p>For PEDSnet, a person with Hispanic ethnicity is defined as "A person of Cuban, Mexican, Puerto Rican, South or Central American, or other Spanish culture or origin, regardless of race."</p> Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where vocabulary_id ='Ethnicity' or (vocabulary_id=PCORNet and concept_class_id='Undefined) where noted): <ul><li>Hispanic: concept_id = 38003563</li> <li>Not Hispanic: concept_id = 38003564</li> <li>No Information: concept_id = 44814650 (vocabulary_id='PCORNet')</li> <li>Unknown: concept_id = 44814653 (vocabulary_id='PCORNet')</li> <li>Other: concept_id = 44814649 (vocabulary_id='PCORNet')</li></ul>
`ethnicity_source_concept_id` | Yes | Yes|Integer | A foreign key to the ethnicity concept that refers to the code used in the source.| <p>**If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0**</p>
`location_id` | No |Provide When Available| BigInteger |  A foreign key to the place of residency (ZIP code) for the person in the location table, where the detailed address information is stored.
`provider_id` | No |Provide When Available| BigInteger |  Foreign key to the primary care provider the person is seeing in the provider table.| <p>For PEDSnet CDM v4.6.0: Sites will use site-specific logic to determine the best primary care provider and document how that decision was made (e.g., billing provider).</p>
`care_site_id` | Yes |Yes| BigInteger|  A foreign key to the site of primary care in the care_site table, where the details of the care site are stored | For patients who receive care at multiple care sites, use site-specific logic to select a care site that best represents where the patient obtains the majority of their recent care. If a specific site within the institution cannot be identified, use a care_site_id representing the institution as a whole.
`pn_gestational_age` | No |Provide When Available| Integer |  The post-menstrual age in weeks of the person at birth, if known | Use granularity of age in weeks as is recorded in local EHR.
`person_source_value` | Yes |Yes|  Varchar |  An encrypted key derived from the person identifier in the source data. | <p>Insert a unique pseudo-identifier (random number, encrypted identifier) into the field. Do not insert the actual MRN or PAT_ID from your site. A mapping from the pseudo-identifier for `person_source_value` in this field to a real patient ID or MRN from the source EHR must be kept at the local site. This mapping is not shared with the data coordinating center. It is used only by the site for re-identification for study recruitment or for data quality review.</p>
`gender_source_value` | Yes |Yes|  Varchar |  The source code for the gender of the person as it appears in the source data. | The person's gender is mapped to a standard gender concept in the Vocabulary; the original value is stored here for reference. See gender_concept_id
`race_source_value` | Yes |Yes|  Varchar |  The source code for the race of the person as it appears in the source data. | <p>The person race is mapped to a standard race concept in the Vocabulary and the original value is stored here for reference.</p> For patients with multiple races (i.e. biracial), race is considered a single concept, meaning there is only one race slot. If there are multiple races in the source system, concatenate all races into one source value, and use the concept_id for Multiple Race.
`ethnicity_source_value` | Yes |Yes|  Varchar |  The source code for the ethnicity of the person as it appears in the source data. | The person ethnicity is mapped to a standard ethnicity concept in the Vocabulary and the original code is, stored here for reference.
`language_concept_id`|Yes| Yes| Integer | A foreign key that refers to the standard concept identifier in the Vocabulary for the language of the person.| <p>For PEDSNet, please map your source codes to acceptable language values in [appendix 2](https://github.com/PEDSnet/Data_Models/blob/master/PEDSnet/docs/PEDSnet_CDM_ETL_Conventions.md#a2-pedsnet-person-language-concept-mapping-values) **If there is not a mapping for the source code in the network language mapping, use concept_id = 44814649 (Other PCORNet Vocabulary)**</p>|
`language_source_concept_id`| Yes| Yes | Integer | A foreign key to the language concept that refers to the code used in the source.|<p>**If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0**</p>
`language_source_value`| Yes| Yes| Varchar | The source code for the language of the person as it appears in the source data | The person language is mapped to a standard language concept in the Vocabulary and the original code is stored here for reference.

**If a field marked as "Provide when available" for the network requirement is not available at your site, please relay this information to the DCC**

## 1.2 DEATH

The death domain contains the clinical event for how and when a person dies. Living patients should not contain any information in the death table.

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`death_cause_id` | Yes | Yes | BigInteger | A unique identifier for each death cause occurrence | This is not a value found in the EHR. Sites may choose to use a sequential value for this field
`person_id` | Yes | Yes |   BigInteger | A foreign key identifier to the deceased person. The demographic details of that person are stored in the person table.| See PERSON.person_id (primary key)
`death_date` | Yes |Yes|   Date | The date the person was deceased. | <p>If the precise date including day or month is not known or not allowed, December is used as the default month, and the last day of the month the default day. If no date available, use date recorded as deceased.</p> When the date of death is not present in the source data, use the date the source record was created.
`death_datetime` | Yes |Yes|   Datetime | The date the person was deceased. |<p>**This field is custom to PEDSnet**</p> <p>If the precise date including day or month is not known or not allowed, December is used as the default month, and the last day of the month the default day. If no date available, use date recorded as deceased.</p> <p>When the date of death is not present in the source data, use the date the source record was created. If there is no time associated with the date assert '23:59:59'.</p>
`death_type_concept_id` | Yes | Yes|  Integer | A foreign key referring to the predefined concept identifier in the Vocabulary reflecting how the death was represented in the source data. | <p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where domain_id ='Death Type')</p> <p>select \* from concept where concept_class_id ='Death Type' yields 9 valid concept_ids. If none are correct, use concept_id = 0</p> <p>Note: Most current ETLs are extracting data from EHR. The common concept_id to insert here is <ul><li>38003569 ("EHR record patient status "Deceased")</li></ul>. Please assert <ul><li>No information: concept_id =  44814650</li></ul> where there is no information in the source</p> **Note**: These terms only describe the source from which the death was reported. It does not describe our certainty/source of the date of death, which may have been created by one of the heuristics described in death_date.
`cause_concept_id` | No |Provide When Available|   Integer | A foreign referring to a standard concept identifier in the Vocabulary for conditions. | 
`cause_source_value` | No |Provide When Available|   Varchar | The source code for the cause of death as it appears in the source. This code is mapped to a standard concept in the Vocabulary and the original code is stored here for reference.
`cause_source_concept_id` | No |Provide When Available| Integer | A foreign key to the vocabulary concept that refers to the code used in the source.| This links to the concept id of the vocabulary of the cause of death concept id as stored in the source. For example, if the cause of death is "Acute myeloid leukemia, without mention of having achieved remission" which has an icd9 code of 205.00 the cause source concept id is 44826430 which is the icd9 code concept that corresponds to the diagnosis 205.00.  <p>**If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0**</p>
`death_impute_concept_id`| Yes | Yes| Varchar | A foreign key referring to a standard concept identifier in the vocabulary for death imputation. | p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where concept_class_id ='Death Imput Type')</p> <p>select \* from concept where (concept_class_id ='Death Imput Type' or (vocabulary_id='PCORNet' and concept_class_id='Undefined')) and invalid_reason is null yields 8 valid concept_ids. If none are correct, use concept_id = 0</p> <ul> <li>Both month and day imputed: 2000000034</li><li>Day imputed: 2000000035</li><li>Month imputed: 2000000036</li><li>Full Date imputed: 2000000038</li><li>Not imputed:2000000037 </li> <li>No Information: concept_id = 44814650 (Vocabulary_id='PCORNet')</li> <li>Unknown: concept_id = 44814653</li> <li>Other: concept_id = 44814649</li></ul></p>

**If a field marked as "Provide when available" for the network requirement is not available at your site, please relay this information to the DCC**

#### 1.2.1 Additional Notes

- Each Person may have more than one record of death in the source data. It is OK to insert multiple death records for an individual.
- If the Death Date cannot be precisely determined from the data, the best approximation should be used.

## 1.3 LOCATION

The Location domain represents a generic way to capture physical location or address information. Locations are used to define the addresses for Persons and Care Sites. The most important fields are ZIP and Census Block Group for location-based queries.

**Note 1:**

In order to participate in location based studies, the DCC recommends populating the `census_block_group` field where possible for locations. The `census_block_group` is typically a 12 digit value and is not to be confused with the more granular `census_block`. The following table describes the standard hierarchy of geographic areas.

**GEOID Structure for Geographic Areas** 

Area Type|	GEOID Structure	|Number of Digits	|Example Geographic Area|	Example GEOID
--|--|--|--|---
State|STATE|	2|	Texas|	48
County	|STATE+COUNTY|	2+3=5	|Harris County, TX	|48201
Census Tract|	STATE+COUNTY+TRACT|	2+3+6=11	|Census Tract 2231 in Harris County, TX|	48201223100
`CENSUS_BLOCK_GROUP`	|**STATE+COUNTY+TRACT+BLOCK GROUP**|**2+3+6+1=12**|	**Block Group 1 in Census Tract 2231 in Harris County, TX**	|**482012231001**
Census Block (DO NOT TRANSMIT)|STATE+COUNTY+TRACT+BLOCK|2+3+6+4=15 (Note – some blocks also contain a one character suffix (A, B, C, ect.)|Block 1050 in Census Tract 2231 in Harris County, TX|482012231001050

[Source: Census.gov](https://www.census.gov/programs-surveys/geography/guidance/geo-identifiers.html)

- If solutions for geocoding addresses have not been implemented at your site the [DeGAUSS tool](https://degauss.org/index.html) may be used to ascertain census block groups for addresses. Please contact the DCC with any questions.


Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`location_id` | Yes | Yes | BigInteger | A unique identifier for each geographic location. | This is not a value found in the EHR. Sites may choose to use a sequential value for this field
`city` | Yes |Provide When Available |Varchar | The city field as it appears in the source data.
`state` | No |Provide When Available|  Varchar | The state field as it appears in the source data.
`zip` | No|Provide When Available|  Varchar | The zip code. For US addresses, valid zip codes can be 3, 5 or 9 digits long, depending on the source data. | While optional, this is the most important field in this table to support location-based queries.
`location_source_value` | No |Provide When Available|  Varchar | The verbatim information that is used to uniquely identify the location as it appears in the source data. | <p>If location source values are deemed sensitive by your organization, insert a pseudo-identifier (random number, encrypted identifier) into the field. Sites electing to obfuscate location_source_values will keep the mapping between the value in this field and the original clear text location source value. This value is only used for site-level re-identification for study recruitment and for data quality review.</p> Sites may consider using the location_id field value in this table as the pseudo-identifier as long as a local mapping from location_id to the real site identifier is maintained.
`country_concept_id`| No | No | Integer|The Concept Id representing the country. Values should conform to the Geography domain.| 
`country_source_value`| No | No | Varchar|The name of the country.| 
`latitude`|No | No | Float|Must be between -90 and 90.| 
`longitude`|No | No | Float|Must be between -180 and 180.| 
`address_1` | No | NO| Varchar | |Do not transmit to DCC
`address_2` | No | NO| Varchar | | Do not transmit to DCC
`county` | No |Provide When Available| Varchar | |
`census_block_group` | No |Provide When Available| Varchar | The Census Block Group associated with the address. This is *NOT* to be confused with the census block. | See Note 1 for more details on the Census Block Group.

**If a field marked as "Provide when available" for the network requirement is not available at your site, please relay this information to the DCC**

#### 1.3 Additional Notes

- Each address or Location is unique and is present only once in the table
- Locations in this table are restricted to locations that are applicable to persons and care_sites in the PEDSnet cohort at each site. When external data is implemented, valid(data containing) locations may be expanded beyond locations of those only present in clinical tables.

## 1.4 CARE_SITE

The Care Site domain contains a list of uniquely identified physical or organizational units where healthcare delivery is practiced (offices, wards, hospitals, clinics, etc.).

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`care_site_id` | Yes | Yes | BigInteger | A unique identifier for each defined location of care within an organization. Here, an organization is defined as a collection of one or more care sites that share a single EHR database. | <p>**SITE RESPONSIBILITY: This field must remain a stable identifier across submissions to the DCC.**</p><p>This is not a value found in the EHR.</p> Sites may choose to use a sequential value for this field
`care_site_name` | No |Provide When Available|  Varchar | The description of the care site | 
`place_of_service_concept_id` | No |Provide When Available|   Integer | A foreign key that refers to a place of service concept identifier in the Vocabulary | <p>Please include valid concept ids (consistent with OMOP CDMv5.4). Predefined value set (valid concept_ids found in CONCEPT table where vocabulary_id = 'CMS Place of Service' and invalid_reason is null)</p> <p>select \* from concept where vocabulary_id = 'CMS Place of Service' and invalid_reason is null yields 49 valid concept_ids.</p> Please use the following value set for PEDSnet v4.6: <ul><li><b>Urgent Care Facility = 	8782</b></li><li>Rural Health Clinic	 = 8761</li><li>Outpatient (Examples: Hospital	Dialysis, HOD, Day Hospital, Day Medicine) = 8756	</li><li>Office	=8940	</li><li>Inpatient Psychiatric Facility	=8971	</li><li>Inpatient Hospital	=8717	</li><li>Independent Clinic	=8716	</li><li>Emergency Room - Hospital = 8870	</li><li>Other Place of Service	=8844	</li><li>Other Inpatient Care	=8892	</li><li>Unknown: concept_id = 44814653 </li> <li>Other: concept_id =  44814649 </li> <li>No information: concept_id =  44814650</li></ul>
`location_id` | No |Provide When Available|   BigInteger | A foreign key to the geographic location of the administrative offices of the organization in the location table, where the detailed address information is stored.
`care_site_source_value` | Yes  | Yes|  Varchar | The identifier for the organization in the source data, stored here for reference. | <p>If care site source values are deemed sensitive by your organization, insert a pseudo-identifier (random number, encrypted identifier) into the field. Sites electing to obfuscate care site_source_values will keep the mapping between the value in this field and the original clear text location source value. This value is only used for site-level re-identification for study recruitment and for data quality review.</p> <p>For EPIC EHRs, map care_site_id to Clarity Department.</p> Sites may consider using the care_site_id field value in this table as the pseudo-identifier as long as a local mapping from care_site_id to the real site identifier is maintained.
`place_of_service_source_value` | No |Provide When Available|  Varchar | The source code for the place of service as it appears in the source data, stored here for reference.
`specialty_concept_id`|No|Provide When Available| Integer|The specialty of the department linked to a standard specialty concept as it appears in the Vocabulary | <p>Care sites could have one or more specialties or a Care site could have no specialty information.</p><p>**Valid specialty concept ids for PEDSnet are found in the [appendix] (https://github.com/PEDSnet/Data_Models/blob/master/PEDSnet/docs/PEDSnet_CDM_ETL_Conventions.md#a1-abms-specialty-category-to-omop-v5-specialty-mapping)**</p><p>**Please use the following rules:**</p><ul><li><p> If care site specialty information is unavailable, please follow the convention on reporting values that are unknown,null or unavailable. </p></li><li><p> If a care site has a single specialty associated with it, sites should link the specialty to the **valid specialty concepts as assigned in the [appendix] (https://github.com/PEDSnet/Data_Models/blob/master/PEDSnet/docs/PEDSnet_CDM_ETL_Conventions.md#a1-abms-specialty-category-to-omop-v5-specialty-mapping)**. If the specialty does not correspond to a value in this listing, please use the NUCC Listing (vocabulary_id='NUCC') provided in the vocabulary as a reference. </p></li><li><p> If there are multiple specialties associated with a particular care site and sites are not able to assign a specialty value on the visit occurrence level, sites should use the specialty concept id=38004477 "Pediatric Medicine". </p></li><li><p> If there are multiple specialties associated with a particular care site and this information is attainable, sites should document the strategy used to obtain this information and the strategy used to link the correct care site/specialty pair for each visit occurrence. Sites should also link the specialty to the **valid specialty concepts as assigned in the [appendix] (https://github.com/PEDSnet/Data_Models/blob/master/PEDSnet/docs/PEDSnet_CDM_ETL_Conventions.md#a1-abms-specialty-category-to-omop-v5-specialty-mapping)**</p> If the specialty does not correspond to a value in this listing, please use the NUCC Listing (vocabulary_id='NUCC') provided in the vocabulary as a reference. </li><li>If the speciality does not correspond to a value in the NUCC Listing and no value in the ABMS Listing, please use the Specialty listing (vocabulary_id=' Medicare Specialty') as a reference</li></ul>|
`specialty_source_value`| No |Provide When Available|  Varchar | The source code for the specialty as it appears in the source data, stored here for reference.

**If a field marked as "Provide when available" for the network requirement is not available at your site, please relay this information to the DCC**

#### 1.4.14.5 Additional Notes

- Care sites are primarily identified based on the specialty or type of care provided, and secondarily on physical location, if available (e.g. North Satellite Endocrinology Clinic)
- The Place of Service Concepts are based on a catalog maintained by the CMS (see vocabulary for values)

## 1.5 PROVIDER

The Provider domain contains a list of uniquely identified health care providers. These are typically physicians, nurses, etc.

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`provider_id` | Yes |Yes|  BigInteger | A unique identifier for each provider. Each site must maintain a map from this value to the identifier used for the provider in the source data. | This is not a value found in the EHR. <p>**SITE RESPONSIBILITY: This field must remain a stable identifier across submissions to the DCC.**</p> <p>A mapping from the provider_id to a real provider from the source EHR must be kept at the local site. This mapping is not shared with the data coordinating center. It is used only by the site for re-identification for study recruitment or for data quality review.</p> Sites should document who they have included as a provider.
`provider_name` | No | NO| Varchar | A description of the provider | DO NOT TRANSMIT TO DCC
`gender_concept_id` | No | Provide When Available|Integer | The gender of the provider | A foreign key to the concept that refers to the code used in the source.|Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table select \* from concept where domain_id='Gender'): <ul><li>Ambiguous: concept_id = 44814664 </li> <li>Female: concept_id = 8532</li> <li>Male: concept_id = 8507</li> <li>No Information: concept_id = 44814650 (Vocabulary_id='PCORNet')</li> <li>Unknown: concept_id = 44814653</li> <li>Other: concept_id = 44814649</li></ul>
`specialty_concept_id` | No | Provide When Available| Integer | A foreign key to a standard provider's specialty concept identifier in the Vocabulary. | <p>Please map the source data to the mapped provider specialty concept associated with the American Medical Board of Specialties as seen in [**Appendix A1**](https://github.com/PEDSnet/Data_Models/blob/master/PEDSnet/docs/PEDSnet_CDM_ETL_Conventions.md#a1-abms-specialty-category-to-omop-v5-specialty-mapping). Predefined value set (valid concept_ids found in CONCEPT table where vocabulary_id in ('Medicare Specialty', 'ABMS','NUCC','PEDSnet'))</p> <p>select \* from concept where vocabulary_id in (' Medicare Specialty', 'ABMS','NUCC','PEDSnet') and invalid_reason is null yields 2200 valid concept_ids.</p> <p>If none are correct, use concept_id = 0</p> For providers with more than one specialty, use site-specific logic to select one specialty and document the logic used. For example, sites may decide to always assert the \*\*first\*\* specialty listed in their data source. As a first guide please use the ABMS and PEDsnet vocabulary specialty listing listing to map your specialtity values. If the specialty does not correspond to a value in these listings, please use the NUCC Listing (vocabulary_id='NUCC') provided in the vocabulary as a reference and the Specialty (vocabulary_id='Medicare Specialty') if no correspond value exists in the NUCC Listing.
`care_site_id` | Yes |Yes|  BigInteger | A foreign key to the main care site where the provider is practicing. | See CARE_SITE.care_site_id (primary key)
`year_of_birth` | No |Provide When Available| Integer | The year of birth of the provider||
`NPI` | No | Site Preference|Varchar | The National Provider Identifier (NPI) of the provider. |
`DEA` | No |Site Preference|  Varchar | The Drug Enforcement Administration (DEA) number of the provider. |
`provider_source_value` | Yes |Yes|  Varchar | The identifier used for the provider in the source data, stored here for reference. | <p>Insert a pseudo-identifier (random number, encrypted identifier) into the field. Do not insert the actual PROVIDER_ID from your site. A mapping from the pseudo-identifier for provider_source_value in this field to a real provider ID from the source EHR must be kept at the local site. This mapping is not shared with the data coordinating center. It is used only by the site for re-identification for study recruitment or for data quality review.</p> Sites may consider using the provider_id field value in this table as the pseudo-identifier as long as a local mapping from provider_id to the real site identifier is maintained.
`specialty_source_value` | No |Provide When Available|  Varchar | The source code for the provider specialty as it appears in the source data, stored here for reference. | Optional. May be obfuscated if deemed sensitive by local site.
`specialty_source_concept_id` | No |Provide When Available| Integer | A foreign key to a concept that refers to the code used in the source.| If providing this information, sites should document how they determine the specialty associated with the provider. **Valid specialty concept ids for PEDSnet are found in the [appendix] (https://github.com/PEDSnet/Data_Models/blob/master/PEDSnet/docs/PEDSnet_CDM_ETL_Conventions.md#a1-abms-specialty-category-to-omop-v5-specialty-mapping)** If the specialty does not correspond to a value in this listing, please use the NUCC Listing (vocabulary_id='NUCC') provided in the vocabulary as a reference.  <p>**If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0**</p>
`gender_source_value` | No |Provide When Available| Varchar | The source value for the provider gender.
`gender_source_concept_id` | No |Provide When Available| Integer | The gender of the provider as represented in the source that maps to a concept in the vocabulary| <p>**If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0**</p>

**If a field marked as "Provide when available" for the network requirement is not available at your site, please relay this information to the DCC**

#### 1.5.1 Additional Notes

- For PEDSnet, a provider is any individual (MD, DO, NP, PA, RN, etc) who is authorized to document care.
- Providers are not duplicated in the table.

## 1.6 VISIT_OCCURRENCE

The visit occurrence domain contains the spans of time a person continuously receives medical services from one or more providers at a care site in a given setting within the health care system.

Exclusions:

1. Future Vists
2. Cancelled Visits (where the patient was not seen)

**Note 1:**
Please use the following logic to assign visit concept ids:

Visit Concept Id |Concept Name| Visit Type Inclusion | In Person| Examples/Logic (includes but is not limited to)
--- | --- | --- | --- | ---
9201 | Inpatient Visit (IP) |Visits that resulted in a patient admission| Yes | Hospital Admissions
9202 |Ambulatory Visit (AV)/Outpatient | In person Outpatient Visits visits where the patient was seen by a physician  |Yes| Office Visits or Appointments
2000000469 |Outpatient Non Physician (OP-Non Physician) | In person Outpatient Visits visits where the patient was **NOT** seen by a physician  |Yes| Lab Visits, Radiology
9203 | Emergency Department Visit (ED) | Emergency Department Visits and Urgent Care | Yes|Emergency Room Visits and Urgent Care
581399| Telehealth|Use of video and other electronic communications to connect clinicians, including pediatric specialists, to patients in their own communities.|Yes||
44814711 |Other ambulatory Visit (OA) | Outpatient visits where the patient was not seen in person.|No|Telephone, Emails, Refills and Orders Only Encounters
42898160 | Long Term Care Visit | Formal or Informal long term care for chronic illness management | Yes| Site discretion
44814710| Non-Acute Institutional | Non-Acute long term management of care| Yes| Site discretion
2000000048 | Emergency Department Admit to Inpatient Hospital Stay| Combination of 9203 and 9201 visits| Yes| Use only if unable to split the ED and inpatient visit.
2000000088 |Observation Visit |Please discern what defines an observation visit at your site | Yes| Only map to the observation visit type if the patient leaves the hospital or is discharged from what has been determined to be an observation visit. For sites splitting visits, ED->Observation visits are only to be mapped as Observation Stay Visits. The split in this case is not required.
2000000104 | Administrative Visit| Other visits that are in the source system for administrative purposes.| No| Professional Billing or Hospital Abstractions

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`visit_occurrence_id` | Yes |Yes|  BigInteger | A unique identifier for each person's visits or encounter at a healthcare provider. |<p>This is not a value found in the EHR.</p> VISIT_OCCURRENCE_ID must be unique for all patients within a single data set.</p><p>**SITE RESPONSIBILITY: This field must remain a stable identifier across submissions to the DCC.**</p> <p>A mapping from the visit occurrence id to a real patient encounter from the source EHR must be kept at the local site. This mapping is not shared with the data coordinating center. It is used only by the site for re-identification for study recruitment or for data quality review.  Do not use institutional encounter ID.</p>
`person_id` | Yes|Yes|  BigInteger | A foreign key identifier to the person for whom the visit is recorded. The demographic details of that person are stored in the person table.
`visit_start_date` | Yes|Yes|  Date | The start date of the visit. | No date shifting. Full date.
`visit_end_date` | No |Provide When Available| Date | The end date of the visit. | <p>No date shifting. Full date.</p> <p>If this is a one-day visit the end date should match the start date.</p> If the encounter is on-going at the time of ETL, this should be null.
`visit_start_datetime` |Yes |Yes|  Datetime | The start date of the visit. | No date shifting.  Full date and time. **If there is no time associated with the date assert midnight for the start time**
`visit_end_datetime` | No |Provide When Available| Datetime | The end date of the visit. | <p>No date shifting.</p> <p>If this is a one-day visit the end date should match the start date.</p> If the encounter is on-going at the time of ETL, this should be null.  Full date and time. **If there is no time associated with the date assert 11:59:59 pm for the end time**
`provider_id` | No |Provide When Available|  BigInteger | A foreign key to the provider in the provider table who was associated with the visit. | <p>Use attending or billing provider for this field if available, even if multiple providers were involved in the visit. Otherwise, make site-specific decision on which provider to associate with visits and document.</p> **NOTE: this is NOT required in OMOP CDM v4, but appears in OMOP CDMv5.**
`care_site_id` | No |Provide When Available| BigInteger | A foreign key to the care site in the care site table that was visited. | See CARE_SITE.care_site_id (primary key)
`visit_concept_id` | Yes |Yes| Integer | A foreign key that refers to a place of service concept identifier in the vocabulary. | <p>**In PEDSnet CDM v1, this field was previously called place_of_service_concept_id**</p><p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where (domain_id='Visit' and ~ 'Enc|Vis|Und')  or (vocabulary_id='PCORNet' and concept_class_id='Encounter Type' and not concept_code ~ '-ED\|-IP\|-AV') or (vocabulary_id='PCORNet' and concept_class_id='Undefined' and not concept_code ~ '-ED\|-IP\|-AV') and invalid_reason is null.</p> <p>select \* from concept where (domain_id='Visit' and ~ 'Enc|Vis|Und') or (vocabulary_id='PCORNet' and concept_class_id='Encounter Type' and not concept_code ~ '-ED\|-IP\|-AV') or (vocabulary_id='PCORNet' and concept_class_id='Undefined' and not concept_code ~ '-ED\|-IP\|-AV') and invalid_reason is null yields 11 valid concept_ids.</p> If none are correct, use concept_id = 0 <ul><li>Inpatient Hospital Stay: concept_id = 9201</li> <li> In person Ambulatory Visit with Physician: concept_id = 9202</li> <li> In person Ambulatory Visit with Non-Physician: concept_id = 2000000469</li> <li>Emergency Department: concept_id = 9203</li> <li>Long Term Care Visit = 42898160 </li><li>Other ambulatory Visit (Non in-person) = 44814711</li> <li>Non-Acute Institutional Stay: concept_id = 44814710 )</li><li>Emergency Department Admit to Inpatient Hospital Stay (If sites are unable to split the encounter) = 2000000048</li> <li>Observation Stay= 2000000088</li> <li>Administrative Visit= 2000000104</li> <li>Unknown: concept_id = 44814653 </li> <li>Other: concept_id =  44814649 </li> <li>No information: concept_id =  44814650</li></ul> See Note 1 Visit Definitions.
`visit_type_concept_id` | Yes |Yes| Integer | A foreign key to the predefined concept identifier in the standard vocabulary reflecting the type of source data from which the visit record is derived.| <p> select \* from concept where concept_class_id='Visit Type' yields 3 valid concept_ids.</p> If none are correct, user concept_id=0. The majority of visits should be type 'Visit derived from EHR record' which is concept_id=44818518
`visit_source_value` | Yes |Yes| Varchar | The source code used to reflect the type or source of the visit in the source data. Valid entries include office visits, hospital admissions, etc. These source codes can also be type-of service codes and activity type codes.
`visit_source_concept_id` | No |Provide When Available| Integer | A foreign key to a concept that refers to the code used in the source. | If a site is using HCPS or CPT for their visit source value, the standard concept id that maps to the particular vocabulary can be used here.  <p>**If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0**</p>
`preceding_visit_occurrence_id`| No | NO | BigInteger| A foreign key to the VISIT_OCCURRENCE table record of the visit immediately preceding this visit.| Do not transmit to DCC
`admitted_from_concept_id`| No|Provide When Available|Integer|A foreign key to the predefined concept in the Place of Service Vocabulary reflecting the admitting source for a visit.| <p>Please use the following valid concept id set for Admitting source:</p><ul><li>Adult Foster Home=44814670</li><li>Assisted Living Facility=44814671</li><li>Ambulatory Visit=44814672</li><li>Emergency Department=8870=</li><li>Home Health=44814674</li><li>Home / Self Care=44814675</li><li>Hospice=8546</li><li>Other Acute Inpatient Hospital=38004279</li><li>Nursing Home (Includes ICF)=44814678</li><li>Rehabilitation Facility=44814679</li><li>Residential Facility=44814680</li><li>Skilled Nursing Facility=8863</li><li>No information=44814650</li><li>Unknown=44814653</li><li>Other=44814649</li></ul> This should be populated for inpatient encounters in the source but may vary for emergency department (ED) visits and outpatient encounters (AV,OA).|
`discharged_to_concept_id`|No|Provide When Available|Integer | A foreign key to the predefined concept in the Place of Service Vocabulary reflecting the discharge disposition (destination) for a visit.|<p>Please use the following valid concept id set for Discharge Destination:</p><ul><li>Adult Foster Home=38004205</li>	<li>Assisted Living Facility=38004301</li><li>Against Medical Advice=4021968</li><li>Absent without leave=44814693</li>	<li>Expired=4216643</li><li>Home Health=38004195</li><li>Home / Self Care=8536</li><li>Hospice=8546</li><li>Other Acute Inpatient Hospital=38004279</li><li>Nursing Home (Includes ICF)=8676</li><li>Rehabilitation Facility=8920</li>	<li>Residential Facility=44814701</li><li>Still In Hospital=8717</li><li>Skilled Nursing Facility=8863</li><li>No information=44814650</li><li>Unknown=44814653</li><li>Other=44814649</li></ul> This should be populated for inpatient encounters in the source but may vary for emergency department (ED) visits and outpatient encounters (AV,OA).
`admitted_from_source_value`|No|Provide When Available|Varchar | The source code for the admitting source as it appears in the source data. |This should be populated for inpatient encounters in the source but may vary for emergency department (ED) visits and outpatient encounters (AV,OA).
`discharged_to_source_value`|No|Provide When Available|Varchar | The source code for the discharge disposition as it appears in the source data. |This should be populated for inpatient encounters in the source but may vary for emergency department (ED) visits and outpatient encounters (AV,OA).

**If a field marked as "Provide when available" for the network requirement is not available at your site, please relay this information to the DCC

#### 1.6.1 Additional Notes

- The 1/1/2009 date limitation that is used to define a PEDSnet active patient is **NOT** applied to visit_occurrence. All visits, of all types (physical and virtual) are included for an active patient.
- A Visit Occurrence is recorded for each visit to a healthcare facility.
- **If a visit includes moving between different visit_concepts (ED -\> inpatient) sites may opt to split the record into separate visit_occurrence records**.

**To show the relationship of the split (ED -\> inpatient) encounter, use the FACT_RELATIONSHIP table**.

An example of this is below:

**VISIT_OCCURRENCE**

visit_occurrence_id | person_id |    visit_start_date    |     visit_end_date     | provider_id | care_site_id | place_of_service_concept_id | place_of_service_source_value 
---------------------|-----------|---------|------------------------|-------------|--------------|------|---------------
35022489 |    209846 | 2011-11-14 17:36:00-05 | 2011-11-14 22:25:00-05 |        2238 |          322 |                        9203 | Emergency
35022490 |    209846 | 2011-11-14 22:25:00-05 | 2011-11-15 16:33:00-05 |        2238 |           43 |                        9201 | Emergency

**FACT_RELATIONSHIP**

Domain_concept_id_1 | fact_id_1 | Domain_concept_id_2 | fact_id_2 | relationship_concept_id
--- | --- | --- | --- | ---
Visit | 35022489| Visit | 35022490|  Occurs before
Visit | 35022490 | Visit | 35022489 | Occurs after 

Because the domain_concept_id and relationship_concept_id are actually numeric values the following is an example of how the table is stored:

Domain_concept_id_1 | fact_id_1 | Domain_concept_id_2 | fact_id_2 | relationship_concept_id
--- | --- | --- | --- | ---
8| 35022489| 8 | 35022490|  44818881
8 | 35022490 | 8 | 35022489 | 44818783

- Operating and Anesthesia encounters that occur as apart of the Inpatient stay should be rolled up into one Inpatient encounter.
- Each Visit is standardized by assigning a corresponding Concept Identifier based on the type of facility visited and the type of services rendered.
- At any one day, there could be more than one visit.
- One visit may involve multiple attending or billing providers (e.g. billing, attending, etc), in which case the ETL must specify how a single provider id is selected or leave the provider_id field null.
- One visit may involve multiple care sites, in which case the ETL must specify how a single care_site id is selected or leave the care_site_id field null.




## 1.7 CONDITION_OCCURRENCE

The condition occurrence domain captures records of a disease or a medical condition based on diagnoses, signs and/or symptoms observed by a provider or reported by a patient.

Conditions are recorded in different sources and levels of standardization. For example:

- Medical claims data include ICD-9-CM diagnosis codes that are submitted as part of a claim for health services and procedures.
- EHRs may capture a person's conditions in the form of diagnosis codes and symptoms as ICD-9-CM or ICD-10-CM codes, but may not have a way to capture out-of-system conditions.
- EHRs may also capture External Injury codes in different place in the source system. These types of codes are also to be included.

For the PEDSNet network, please provide **clinical physician based diagnosis** as opposed to billing or claim based diangosis data.

**Note 1:**
For the PEDSNet network, we are coding all diagnosis codes to the SNOMED-CT Vocabulary. Research has showed that the IMO to SNOMED native mapping and IMO to ICD to SNOMED OMOP mapping produces highly variable results. For a particular IMO Code, when comparing the two mapping options, the same SNOMED concept id is only produced 25% of the time. See below examples of the mapping differences (IMO-SNOMED, ICD10 and ICD9):

IMO Description | Direct SNOMED | Via ICD 
--- | --- | --- 
Numbness of Toes | Numbness of toe | Altered Sensation of Skin| Direct SNOMED
Cerebellar ataxia/dyskinesia |Cerebellar Disorder |Cerebellar Ataxia
Choking episode | Choking sensation | Finding of head and neck region
Intestional malrotation | Congenital malrotation of intestine | Congenital anomaly of fixation of intestine
Genetic disease carrier status testing| Genetic finding| Genetic disorder carrier
Duchenne muscular dystrophy |Duchenne muscular dystrophy |Hereditary progressive muscular dystrophy

For diagnosis codes, please provide the IMO to SNOMED mapping where it exists in the source system. 

If the IMO to SNOMED mapping is not available in the system, utilize the IMO to ICD to SNOMED OMOP mapping in the vocabulary.

Please use the following logic to populate the `condition_concept_id`, `condition_source_concept_id` and `condition_source_value` based on what is available in your source system:

You have in your source system | condition_concept_id|condition_source_concept_id|condition_source_value
--- | --- | --- | ---
Any diagnosis that was captured as a term or name (e.g. IMO to SNOMED)| Corresponding SNOMED concept id |Corresponding concept for site diagnosis captured (must correspond to ICD9/ICD10 concept mapping) | Diagnosis Name "\|" IMO Code "\|" Diagnosis Code 
Any diagnosis that was captured directly as a code (e.g. ICD9/10) by a coder | Corresponding SNOMED concept id | Corresponding concept for site diagnosis code (must correspond to ICD9/ICD10 concept mapping) | Diagnosis Name "\|" IMO Code "\|" Diagnosis Code


**Note 2:**
For the PEDSNet network, please provide clinical physician based diagnosis as opposed to billing or claim based diangosis data. The clinical physician based diagnosis corresponds to the "Order origin" concept ids for `condition_type_concept_id`. If you are providing billing or claim diagnosis data, please use the "Billing" or "Claim" concept_ids for `condition_type_concept_id`.

Use the following logic to determine the correct `condition_type_concept_id` as it pertains to the visit the diagnosis stems from:

Visit_concept_id | Condition_type_concept_id
--- | ---
9201 (Inpatient)| Inpatient header 
9202 (Outpatient) | Outpatient header 
581399 (Interactive Telemedicine Service)| Outpatient header 
9203 (Emergency)| Emergency header
2000000048 (ED to Inpatient)| Inpatient header 
2000000088 (Observation)| Inpatient header 

**Note 3:**
 We have been made aware that there are a significant amount of conditions that route to a domain of Procedure, Measurement etc. Please **DO NOT** route these conditions to those domains or tables (i.e. Procedure_Occurrence, Measurement). Instead, include all records coming out of our source tables for diagnosis data in the Condition_Cccurrence table. 
 

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`condition_occurrence_id` | Yes |Yes| BigInteger| A unique identifier for each condition occurrence event. | This is not a value found in the EHR. Sites may choose to use a sequential value for this field
`person_id` | Yes |Yes| BigInteger | A foreign key identifier to the person who is experiencing the condition. The demographic details of that person are stored in the person table.
`condition_concept_id` | Yes |Yes| Integer | A foreign key that refers to a standard condition concept identifier in the Vocabulary. | <p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where vocabulary_id ='SNOMED')</p> <p>select \* from concept where vocabulary_id ='SNOMED'  yields ~440,000 valid concept_ids.</p> If none are correct, use concept_id = 0
`condition_start_date` | Yes |Yes| Date| The date when the instance of the condition is recorded. | No date shifting.  
`condition_end_date` | No |Provide When Available| Date| The date when the instance of the condition is considered to have ended | <p>No date shifting.</p> If this information is not available, set to NULL. 
`condition_start_datetime` | Yes |Yes| Datetime | The date and time when the instance of the condition is recorded. | No date shifting.  Full date and time. **If there is no time associated with the date assert midnight for the start time**
`condition_end_datetime` | No |Provide When Available| Datetime | The date and time when the instance of the condition is considered to have ended | <p>No date shifting.</p> If this information is not available, set to NULL.  Full date and time.  **If there is no time associated with the date assert 11:59:59 pm for the end time**
`condition_type_concept_id` | Yes |Yes| Integer | A foreign key to the predefined concept identifier in the Vocabulary reflecting the source data from which the condition was recorded, the level of standardization, and the type of occurrence. For example, conditions may be defined as primary or secondary diagnoses, problem lists and person statuses. | <p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where concept_class_id ='Condition Type' and vocabulary_id='PEDSnet')</p> <p>select \* from concept where concept_class_id ='Condition Type' and vocabulary_id='PEDSnet' yields 21 valid concept_ids.</p> <p>If none are correct, use concept_id = 0</p>**For the primary diagnosis for the inpatient, outpatient or emergency setting (may be identified as Dx#1 in a source system), Please use concepts the following concepts:** <ul><li>Outpatient header - 1st position - Order Origin=2000000095</li><li>Outpatient header - 1st position - Billing Origin=2000000096</li><li>Outpatient header - 1st position - Claim Origin=2000000097</li><li>Inpatient header - primary - Order Origin=2000000092</li><li>Inpatient header - primary - Billing Origin =2000000093</li><li>Inpatient header - primary - Claim Origin= 2000000094</li><li>Emergency Header - 1st Position - Order Origin=2000001280</li> <li>Emergency Header - 1st Position - Claim Origin=2000001281</li> <li>Emergency Header - 1st Position - Billing Origin=2000001282</li></ul>**All other diagnosis that is not the primary (or Dx#1) in the inpatient, outpatient or emergency setting should correspond to the following concept ids:**<ul><li>Inpatient header - 2nd position - Order Origin=2000000098</li><li>Inpatient header - 2nd position - Billing Origin = 2000000099</li><li>Inpatient header - 2nd position - Claim Origin = 2000000100</li><li>Outpatient header - 2nd position - Order Origin=2000000101</li><li>Outpatient header - 2nd position - Billing Origin =2000000102</li><li>Outpatient header - 2nd position - Claim Origin =2000000103</li><li>Emergency Header - 2nd Position - Order Origin=2000001283</li> <li>Emergency Header - 2nd Position - Claim Origin=2000001284</li> <li>Emergency Header - 2nd Position - Billing Origin=2000001285</li></ul>**For diagnosis from the problem list, please use the following concept ids:**<ul><li>EHR problem list entry - Order Origin = 2000000089 </li><li>EHR problem list entry - Billing Origin =2000000090</li><li>EHR problem list entry - Claim Origin =2000000091</li></ul> **For admission diagnosis, please use the following concept ids:**<ul><li> Admission Diagnosis - Order= 2000001423</li>Admission Diagnosis - Billing= 2000001424<li> Admission Diagnosis - Claim= 2000001425</li><li></li></ul> **SEE NOTE 2 for further guidance on determining the origin**
`stop_reason` | No |Provide When Available| Varchar | The reason, if available, that the condition was no longer recorded, as indicated in the source data. | <p>Valid values include discharged, resolved, etc. Note that a stop_reason does not necessarily imply that the condition is no longer occurring, and therefore does not mandate that the end date be assigned.</p>
`provider_id` | No |Provide When Available| BigInteger | A foreign key to the provider in the provider table who was responsible for determining (diagnosing) the condition. | **In PEDSnet CDM v1, this field was previously called associated_provider_id**<p>Any valid provider_id allowed (see definition of providers in PROVIDER table)</p> Make a best-guess and document method used. Or leave blank
`visit_occurrence_id` | No | Provide When Available|BigInteger| A foreign key to the visit in the visit table during which the condition was determined (diagnosed).
`condition_source_value` | Yes |Yes| Varchar | The source code for the condition as it appears in the source data. This code is mapped to a standard condition concept in the Vocabulary and the original code is, stored here for reference. | Condition source codes are typically ICD-9-CM or ICD-10-CM diagnosis codes from medical claims or discharge status/visit diagnosis codes from EHRs. Use source_to_concept maps to translation from source codes to OMOP concept_ids. **Please include the diagnosis name and source code when populating this field, by using the pipe delimiter "\|" when concatenating values.** Example: Diagnosis Name "\|" IMO Code "\|" Diagnosis Code
`condition_source_concept_id` | No |Provide When Available| Integer | A foreign key to a condition concept that refers to the code used in the source| As a standard convention this code must correspond to the ICD9/ICD10 concept mapping of the source value only. For example, if the condition is "Acute myeloid leukemia, without mention of having achieved remission" which has an icd9 code of 205.00 the condition source concept id is 44826430 which is the icd9 code concept that corresponds to the diagnosis 205.00. <p>**If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0**</p>
`condition_status_concept_id` |No | Optional| Integer|A foreign key to the predefined concept in the standard vocabulary reflecting the condition status. | <p> For PEDSnet v4.6 we are only reporting final diagnosis, please use the following concept id:</p><ul> <li> Final Diagnosis=4230359 </li></ul>
`condition_status_source_value`| No| Optional | Varchar|  The source code for the condition status as it appears in the source data.
`poa_concept_id`|No|Optional|Integer| A foreign key to value in the source for that determines if the diagnosis is present on admission| <p> For PEDSnet CDM v4.6, please use the following: <ul><li>Yes=4188539 </li><li>No=4188540</li><li>No Information: concept_id = 44814650 </li> <li>Unknown: concept_id = 44814653</li> <li>Other: concept_id = 44814649</li></ul> If none are correct, use concept_id = 0. </p>




**If a field marked as "Provide when available" for the network requirement is not available at your site, please relay this information to the DCC**

#### 1.7.1 Additional Notes

- The 1/1/2009 date limitation that is used to define a PEDSnet active patient is \*\*NOT\*\* applied to condition_occurrence. All conditions are included for an active patient. For PEDSnet CDM v4.6, we limit condition_occurrences to final diagnoses only (not reason-for-visit and provisional surgical diagnoses such as those recored in EPIC OPTIME). In EPIC, final diagnoses includes both encounter diagnoses and billing diagnoses, problem lists (all problems, not filtered on "chronic" versus "provisional" unless local practices use this flag as intended). Medical History diagnosis are optional.
- Condition records are inferred from diagnostic codes recorded in the source data by a clinician or abstractionist for a specific visit. In the current version of the CDM, diagnoses extracted from unstructured data (such as notes) are not included.
- Source code systems, like ICD-9-CM, ICD-10-CM, etc., provide coverage of conditions. However, if the code does not define a condition, but rather is an observation or a procedure, then such information is not stored in the CONDITION_OCCURRENCE table, but in the respective tables instead. An example are ICD-9-CM procedure codes. For example, OMOP source-to-concept table uses the MAPPING_TYPE column to distinguish ICD9 codes that represent procedures rather than conditions.
- Condition source values are mapped to standard concepts for conditions in the Vocabulary. For mapping ICD9 Codes to SNOMED, use the concept_relationship table where the icd9_code = concept_id_1 and relationship_id='Maps to'. Concept_id_2 will be the SNOMED concept_id mapping you need to populate the condition_concept_id.

- When the source code cannot be translated into a Standard Concept, a CONDITION_OCCURRENCE entry is stored with only the corresponding source_value and a condition_concept_id of 0.
- Codes written in the process of establishing the diagnosis, such as "question of" of and "rule out", are not represented here.

## 1.8 PROCEDURE_OCCURRENCE

The procedure occurrence domain contains records of significant activities or processes ordered by and/or carried out by a healthcare provider on the patient to have a diagnostic and/or therapeutic purpose that are not fully captured in another table (e.g. drug_exposure).

Procedures records are extracted from structured data in Electronic Health Records that capture source procedure codes using CPT-4, ICD-9-CM (Procedures),ICD-10 (Procedures), HCPCS or OPCS-4 procedures as orders.

More specifically the procedure occurrence domain is intended to stores information about activity or processes involving a patient that has a billable code. This includes but is not limited to the following:
- LOS Codes ((Eg. 99123) This code may not Not necessarily be a CPT and could require local mapping )
- Lab Procedures (including a Lab Panel Order and Culture Orders)
- Surgery Procedures
- Imaging Procedures
- Ancilliary Therapies (Speech, Physical, Occupational etc)

Notes:
**Only instantiated procedures are included in this table. Please exclude cancelled procedures.**
**For CPT Codes, only include codes that are included in the standard CPT4 vocabulary from the distributed vocabulary**

**Note 1:**
Please use the following logic to populate the `procedure_concept_id`, `procedure_source_concept_id` and `procedure_source_value` based on what is available in your source system:

Site Information | procedure_concept_id|procedure_source_concept_id|procedure_source_value
--- | --- | --- | ---
Procedure codes using CPT-4, ICD-9-CM (Procedures),ICD-10 (Procedures), HCPCS or OPCS-4 procedures as orders | Corresponding CPT-4, ICD-9-CM (Procedures),ICD-10 (Procedures), HCPCS or OPCS-4 concept id |Corresponding CPT-4, ICD-9-CM (Procedures),ICD-10 (Procedures), HCPCS or OPCS-4 concept id | Procedure Name \| Procedure Source Code
Custom Procedure Coding (That a site has knowledge of corresponding to a standard code but requires manual mapping) |Corresponding CPT-4, ICD-9-CM (Procedures),ICD-10 (Procedures), HCPCS or OPCS-4 concept id  | 0 | Procedure Name \| Custom Procedure Code

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`procedure_occurrence_id` | Yes |Yes| BigInteger| A system-generated unique identifier for each procedure occurrence | This is not a value found in the EHR. Sites may choose to use a sequential value for this field
`person_id` | Yes |Yes| BigInteger | A foreign key identifier to the person who is subjected to the procedure. The demographic details of that person are stored in the person table.
`procedure_concept_id` | Yes |Yes| Integer | A foreign key that refers to a standard procedure concept identifier in the Vocabulary. | <p>Valid Procedure Concepts belong to the "Procedure" domain. Procedure Concepts are based on a variety of vocabularies: SNOMED-CT (vocabulary_id ='SNOMED'), ICD-9-Procedures (vocabulary_id ='ICD9Proc'),ICD-10-Procedures (vocabulary_id ='ICD10PCS' **NOT YET AVAILABLE**), CPT-4 (vocabulary_id ='CPT4' ), and HCPCS (vocabulary_id ='HCPCS')</p> <p>Procedures are expected to be carried out within one day. If they stretch over a number of days, such as artificial respiration, usually only the initiation is reported as a procedure (CPT-4 "Intubation, endotracheal, emergency procedure").</p> Procedures could involve the administration of a drug, in which case the procedure is recorded in the procedure table and simultaneously the administered drug in the drug table.
`modifier_concept_id` | No |Provide When Available| Integer | A foreign key to a standard concept identifier for a modifier to the procedure (e.g. bilateral) |  <p>Valid Modifier Concepts belong to the "Modifier" concept class. select /* from concept where concept_class_id like '%Modifier%'. </p>
`quantity` | No |Provide When Available|Float |The quantity of procedures ordered or administered.
`procedure_date` | Yes | Yes|Date | The date on which the procedure was performed. 
`procedure_datetime` | Yes | Yes|Datetime | The date and time on which the procedure was performed. If there is no time associated with the date assert midnight. | 
`procedure_end_date` | No | No|Date | The date on which the procedure ended. 
`procedure_end_datetime` | No | No|Datetime | The date and time on which the procedure ended. If there is no time associated with the date assert midnight. | 
`procedure_type_concept_id` | Yes |Yes| Integer | A foreign key to the predefined concept identifier in the Vocabulary reflecting the type of source data from which the procedure record is derived. (OMOP vocabulary_id = 'Procedure Type') | <p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where vocabulary_id = 'Procedure Type')</p> <p>select \* from concept where vocabulary_id ='Procedure Type' yields 93 valid concept_ids.</p><p>For procedures coming from billing records please map to the following concepts:<ul><li>Primary Procedure: 44786630</li><li>Secondary Procedure: 44786631</li></ul><p>If you are unable to distinguish between primary and secondary procedures for billing records, please map to the following: <ul><li>Secondary Procedure: 44786631</li></ul></p><p>For procedures coming from physician orders and all other types, please map to the following concepts:<ul><li> EHR order list entry - primary: 2000001494 </li><li> EHR order list entry - secondary: 38000275 </li></ul></p><p>If you are unable to distinguish between primary and secondary procedures for procedures coming from physician orders or other types, please map to the following: <ul><li>EHR order list entry - secondary: 38000275 </li></ul></p>
`provider_id` | No | Provide When Available|BigInteger | A foreign key to the provider in the provider table who was responsible for carrying out the procedure. | <p>Any valid provider_id allowed (see definition of providers in PROVIDER table)</p> Document how selection was made.
`visit_occurrence_id` | No |Provide When Available| BigInteger | A foreign key to the visit in the visit table during which the procedure was carried out. | See VISIT.visit_occurrence_id (primary key)
`procedure_source_value` | Yes |Yes| Varchar | The source code for the procedure as it appears in the source data. This code is mapped to a standard procedure concept in the Vocabulary and the original code is stored here for reference. | Procedure_source_value codes are typically ICD-9, ICD-10 Proc, CPT-4, HCPCS, or OPCS-4 codes. All of these codes are acceptable source values.Please also include the procedure name. See Note 1.
`procedure_source_concept_id` | No |Provide When Available| Integer | A foreign key to a procedure concept that refers to the code used in the source.| For example, if the procedure is "Anesthesia for procedures on eye; lens surgery" in the source which has a concept code in the vocabulary that is 2100658. The procedure source concept id will be 2100658.  <p>**If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0**</p>
`modifier_source_value` | No |Provide When Available| Varchar | The source code for the modifier as it appears in the source data.

**If a field marked as "Provide when available" for the network requirement is not available at your site, please relay this information to the DCC**

#### 1.8.1 Additional notes

- The 1/1/2009 date limitation that is used to define a PEDSnet active patient is \*\*NOT\*\* applied to procedure_occurrence. All procedures are included for an active patient. For PEDSnet CDM v4.6, we limit procedures_occurrences to billing procedures only (not surgical diagnoses).
- Procedure Concepts are based on a variety of vocabularies: SNOMED-CT, ICD-9-Proc, ICD-10-Proc, CPT-4, HCPCS and OPCS-4.
- Procedures could reflect the administration of a drug, in which case the procedure is recorded in the procedure table and simultaneously the administered drug in the drug table.
- The Visit during which the procedure was performed is recorded through a reference to the VISIT_OCCURRENCE table. This information is not always available.
- The Provider carrying out the procedure is recorded through a reference to the PROVIDER table. This information is not always available.

## 1.9 OBSERVATION

The observation domain captures clinical facts about a patient obtained in the context of examination, questioning or a procedure. The observation domain supports capture of data not represented by other domains such as unstructured measurements. For the PEDSnet CDM Version 4.6, the observations listed below are extracted from source data. Please assign the specific concept_ids listed in the table below to these observations as observation_concept_ids. Non-standard PCORnet concepts require concepts that have been entered into an OMOP-generated vocabulary (OMOP provided vocabulary_id ='PCORNet').

NOTE: DRG and DRG Type require special logic/processing described below.

- Discharge status (Inpatient and outpatient visit types where available)
- DRG (requires special logic - see Note 1 below)
- Tobacco Information (see Note 4)
- Improve Care Now (ICN) IDB Survey Data elements (See Note 10)

Use the following table to populate observation_concept_ids for the observations listed above. The vocabulary id 'PCORNet' contains concept specific to PCORNet requirements and standards.

**Table 1: Valid Observation concept IDs and Value as concept IDs for PEDSNet v4.6.** 

Concept Name | Observation concept ID | Vocab ID | Value as concept ID | Concept description | Vocab ID| PCORNet Mapping
 --- | --- | --- | --- | --- | ---| ---
Discharge status(See Note 3) | 44813951 | SNOMED | 4161979 | Discharged alive
Discharge status| 44813951 | SNOMED | 4216643 | Expired
Discharge status | 44813951 | SNOMED | 44814650 | No information | PCORNet
Discharge status | 44813951 | SNOMED | 44814653 | Unknown | PCORNet
Discharge status | 44813951 | SNOMED | 44814649 | Other | PCORNet
Tobacco |4005823| |4005823 |Tobacco User | | 01 = Current user
Tobacco |4005823| |45765920 |  Never used Tobacco| |02 = Never
Tobacco |4005823| |45765917|  Ex-tobacco user| |03 = Quit/Former Smoker
Tobacco |4005823| |4030580 | Non-smoker's second hand smoke syndrome| |04 = Passive or environmental exposure
Tobacco |4005823| |2000000040 ||| 06 = Not asked
Tobacco |4005823| |44814650 |No information | PCORNet | NI
Tobacco |4005823| |44814653| Unknown| PCORNet | OT
Tobacco |4005823| |44814649| Other| PCORNet| UN
Tobacco Type |4219336 |Multiple Response allowed |4298794 |Smoker | | 01 = Smoked tobacco only
Tobacco Type |4219336 |Multiple Response allowed |4224317 |Pipe smoking tobacco | | 01 = Smoked tobacco only
Tobacco Type |4219336 |Multiple Response allowed |4282779 |Cigarette smoking tobacco | | 01 = Smoked tobacco only
Tobacco Type |4219336 | Multiple Response allowed|4132133 |Cigar smoking tobacco | | 01 = Smoked tobacco only
Tobacco Type |4219336 |Multiple Response allowed |4218197 |Snuff tobacco | | 02 = Non-smoked tobacco only
Tobacco Type |4219336 | Multiple Response allowed|4219234 |Chewing tobacco | | 02 = Non-smoked tobacco only
Tobacco Type |4219336 | |45765920 |Never used tobacco | | 04 = None
Tobacco Type |4219336 | |45765917 |Ex tobacco user | | 04 = None
Tobacco Type |4219336 | |4030580 | Non-smoker's second hand smoke syndrome| |04 = Passive or environmental exposure/None
Tobacco Type |4219336 | | 44814650 |No information | PCORNet| NI
Tobacco Type |4219336 | |44814653| Unknown| PCORNet | OT
Tobacco Type |4219336 | |44814649| Other| PCORNet| UN
Smoking |4275495 | |42709996 |Smokes tobacco daily| | 01 = Current everyday smoker
Smoking |4275495 | |37395605|Occasional tobacco smoker || 02 = current some day smoker
Smoking |4275495 | |4310250|Ex-smoker| | 03 = Former smoker
Smoking |4275495 | |4144272|Never smoked tobacco| | 04 = Never smoker
Smoking |4275495 | |4298794|Smoker| | 05 = Smoker, current status unknown
Smoking |4275495 | |4141786|Tobacco smoking consumption(status) unknown| | 06 = Unknown if ever smoked
Smoking |4275495 |**USE AS DEFAULT FOR CATEGORY** |762499|Heavy tobacco smoker/ eavy smoker (over 20 per day) | | 07 = Heavy tobacco smoker
Smoking |4275495 |**USE ONLY IF QUANTITY OF CIGARETTES IS KNOWN** |4209585|Moderate smoker (20 or less per day)| | 08 = Light tobacco smoker
Smoking |4275495 | | 44814650 |No information | PCORNet| NI
Smoking |4275495 | |44814653| Unknown| PCORNet | OT
Smoking |4275495 | |44814649| Other| PCORNet| UN
Delivery Mode (see note 5)|40760190| SNOMED|4192676 |Born by cesarean section|SNOMED|
Delivery Mode|40760190| SNOMED|4212794|Born by elective cesarean section|SNOMED|
Delivery Mode|40760190| SNOMED|4250010|Born by emergency cesarean section|SNOMED|
Delivery Mode|40760190| SNOMED|4216797|Born by normal vaginal delivery|SNOMED|
Delivery Mode|40760190| SNOMED|4217586|Born by forceps delivery|SNOMED|
Delivery Mode|40760190| SNOMED|4236293|Born by ventouse delivery|SNOMED|
Delivery Mode|40760190| SNOMED|4250009|Born by breech delivery|SNOMED|
Suspected exposure to severe acute respiratory syndrome coronavirus 2|756083|OMOP Extension| 756046|Person Employed as a Healthcare Worker|OMOP Extension
Suspected exposure to severe acute respiratory syndrome coronavirus 2|756083|OMOP Extension|44802454|Information external to care setting|SNOMED
EHR Chief Complaint|42894222|Condition Type |||||
Electronic cigarette user|	36716478|SNOMED|42536422| Electronic cigarette liquid containing nicotine| SNOMED
Electronic cigarette user|	36716478|SNOMED|42536421| Electronic cigarette liquid without nicotine| SNOMED
Electronic cigarette user|	36716478|SNOMED|42536420| Electronic cigarette liquid (if nicotine type is not known)|SNOMED
Improve Care Now (IBD) Survey Elements| **See Note 10**|||
Device Interface |2000001495|PEDSnet | See note for Taxonomy in CDM Vent Pilot Guidance | | |
Ventilation Mode |2000001496|PEDSnet | See note for Taxonomy in CDM Vent Pilot Guidance | | |
Ventilator Rate |4108138 |SNOMED | See note for Taxonomy in CDM Vent Pilot Guidance | | |
Inspiratory Pressure |4215838  |SNOMED | See note for Taxonomy in CDM Vent Pilot Guidance | | |
Tidal volume setting  |4220163   |SNOMED | See note for Taxonomy in CDM Vent Pilot Guidance | | |
PEEP setting |4216746   |SNOMED | See note for Taxonomy in CDM Vent Pilot Guidance | | |
Inspiratory time  |4353947    |SNOMED | See note for Taxonomy in CDM Vent Pilot Guidance | | |
Time off vent per day |2000001497 |PEDSnet | See note for Taxonomy in CDM Vent Pilot Guidance | | |

**Note 1**: For DRG, use the following logic (must use vocabulary version 5):

- The DRG value must be three digits as text. Put into value_as_string in observation
- For all DRGs, set observation_concept_id = 3040464 (hospital discharge DRG)
- To obtain correct value_as_concept_id for the DRG:
    - If the date for the DRG \< 10/1/2007, use concept_class_id = "DRG", invalid_date = "9/30/2007", invalid_reason = 'D' and the DRG value=CONCEPT.concept_code to query the CONCEPT table for correct concept_id to use as value_as_concept_id.
    - If the date for the DRG \>=10/1/2007, use concept_class_id = "MS-DRG", invalid_reason = NULL and the DRG value = CONCEPT.concept_code to query the CONCEPT table for the correct concept_id to use as value_as_concept_id.
- If your site has **APR-DRGs** please include these in the observation table. We have requested the APR-DRG vocabulary to be incorporated as apart of the OMOP standard vocabulary. 
- Please use the following in the qualifier_concept_id: <ul><li>Primary/Principal: concept_id = 4269228 </li><li>Secondary: concept_id = 4093903</li></ul><p>If you are unable to distinguish between primary and secondary DRG type. Please map to the following: <ul><li>Secondary: concept_id = 4093903</li></ul></p> <p>If none are correct, use concept_id = 0.</p>

**Note 2:** 
- For each inpatient encounter or in some cases the outpatient encounter, there can be 1 discharge status and 1 or more DRG
  (May not be 1:1 if patients still admitted (therefore no discharge disposition, discharge details or DRG yet))
- There should **NOT** be discharges without admission.

**Note 3:** Please provide tobacco information from the primary source of data capture at your site. If tobacco information is available at the visit level, please provide this information. If it is not, sites are welcomed to make a high level assertion about tobacco use and tobacco type information for individuals in the cohort.

<a name="observation-note-4"/>**Note 4:**</a> Below are examples of how the observation table and the fact relationship table would be populated for tobacco, smoking and tobacco type scenarios. In the case where tobacco information is recorded at a visit but there is missing information for tobacco, smoking or tobacco type please assert. The PEDSnet standard relationship concept id for linking tobacco items will be *0*. This concept id was chosen as there was not a specific concept id that exists in the standard vocabulary that adequately defined an appropriate relationship for linking the tobacco items.

*Example 1:*

Patient 1 smokes 5 cigarettes per day and does not use non-smoked tobacco

Observation table:

Observation ID|	Person ID|	Observation concept id|	Value as concept id
---|---|---|---
0001|	1|	4005823|	4005823
0002|	1|	4219336|	4282779
0003|	1|	4275495|	762498


Fact relationship:

Domain_concept_id_1|	Fact_id_1|	Domain_concept_id_2|	Fact_id_2	|relationship_concept_id
---|---|---|---|---
27|	0001|	27	|0002	|0
27 |0001|	27|	0003|	0

*Example 2:*
Patient 2 smokes 25-40 cigarettes per day and also chews tobacco

Observation table:

Observation ID|	Person ID|	Observation concept id|	Value as concept id
---|---|---|---
0004|	2|	4005823|	4005823
0005|	2|	4219336	|4282779
0006|	2|	4219336	|4219234
0007|	2|	4275495	|762499

Fact relationship:

Domain_concept_id_1|	Fact_id_1|	Domain_concept_id_2|	Fact_id_2	|relationship_concept_id
---|---|---|---|---
27	|0004|	27	|0005|	0
27|	0004|	27	|0006|	0
27|	0004|	27	|0007|	0

*For more examples, or if you have a specific scenario that you have a question about, please contact the DCC.*

**Note 5**: 
- For delivery mode, if you are unable to discern between elective (concept_id = 4212794) and emergency (concept_id = 4250010) cesarean, please default to the born by cesarean section (concept_id = 4192676).

**Note 6**:
To capture health care workers (HCW), create a record in the observation table using the following concept_ids:

observation_concept_id: `756083: Suspected exposure to severe acute respiratory syndrome coronavirus 2 `
value_as_concept_id:`756046: Person Employed as a Healthcare Worker`

Please see the example below for formatting guidelines (with required fields):

observation table field|value
---|---
person_id| `1234`
observation_concept_id| `756083`
osbervation_date| `Date of suspected exposure (if known) or best estimate`
observation_type_concept_id| `38000280`
value_as_concept_id|`756046`

**Note 7**:

Patients may be identified as having COVID-19 using outside sources (e.g. a site registry, outside lab testing). Because of this diagnosis or testing data may not be available during the ETL.

To identify these patients, create a record in the observation table using the following concept_ids:

observation_concept_id: `756083: Suspected exposure to severe acute respiratory syndrome coronavirus 2 `
value_as_concept_id:`44802454:	Information external to care setting`

observation table field|value
---|---
person_id| `1234`
observation_concept_id| `756083`
osbervation_date| `Date of suspected exposure (if known) or best estimate`
observation_type_concept_id| `38000280`
value_as_concept_id|`44802454`

**Note 8**:

The cheif complaint is often a free text or non-structured field in source systems without any standard terminology. To record this kind of chief complaint for the patient, please use the following **observation_concept_id** to insert a record into the **observation** table:

observaton_concept_id|concept_name
---|---
42894222| EHR Chief Complaint

Please make an effort to redact any potential PHI.

We recognize that chief complaint as defined above may not be available.

**Note 9**:

To record the vaping smoking status for the patient, please use the following conventions to insert a record into the **observation** table:

Concept Name	|Observation concept ID|	Value as concept ID	|Concept description|	Vocab ID
---|---|---|---|---
Electronic cigarette user|	36716478|42536422| Electronic cigarette liquid containing nicotine| SNOMED
Electronic cigarette user|	36716478|42536421| Electronic cigarette liquid without nicotine| SNOMED
Electronic cigarette user|	36716478|42536420| Electronic cigarette liquid (if nicotine type is not known)|SNOMED

**Note 10**:

To record Improve Care Now (IBD) Survey Elements, use guidance [here](https://github.com/PEDSnet/Data_Models/blob/master/PEDSnet/docs/ICN%20Survey%20Concept%20Mapping.md) to determine how survery questions and answers should be mapped. 

The elements captured will correspond to the following IBD related outcomes:

- Pediatric Crohn’s Disease Activity Index (PCDAI)
- Pediatric Ulcerative Colitis Activity Index (PUCAI)
- Physician Global Assessment (PGA)
- Chron's Disease Phenotype
- Extent of Macroscopic Lower GI Disease


Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`observation_id` | Yes |Yes| BigInteger|  A unique identifier for each observation. | This is not a value found in the EHR. Sites may choose to use a sequential value for this field
`person_id` | Yes |Yes| BigInteger| A foreign key identifier to the person about whom the observation was recorded. The demographic details of that person are stored in the person table.|
`observation_concept_id` | Yes |Yes| Integer | A foreign key to the standard observation concept identifier in the Vocabulary. | Lab results and vitals are not stored in this table in V5 but are stored in the Measurement table.
`observation_date` | Yes |Yes| Date | The date of the observation. | No date shifting.  Full date and time. If there is no time associated with the date assert midnight.
`observation_datetime` | No |Provide When Available| Datetime | The time of the observation. | No date shifting.  Full date and time. If there is no time associated with the date assert midnight.
`observation_type_concept_id` | Yes |Yes| Integer | A foreign key to the predefined concept identifier in the Vocabulary reflecting the type of the observation. | <p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where vocabulary_id ='Observation Type')</p> <p>select \* from concept where vocabulary_id = 'Observation Type' yields 11 valid concept_ids.</p> FOR PEDSnet CDM v4.6, all of our observations are coming from electronic health records so *set this field to concept_id = 38000280* (observation recorded from EMR). When we get data from patients, we will include the concept_id = 44814721
`value_as_number` |No (see convention) |Provide When Available| Float | The observation result stored as a number. This is applicable to observations where the result is expressed as a numeric value. | Value must be represented as at least one of {value_as_number, value_as_string or values_as_concept_id}. There are a few exceptions in vocabulary id PCORNet where all three value_as_\* fields are NULL.
`value_as_string` | No (see convention) | Provide When Available|Varchar | The observation result stored as a string. This is applicable to observations where the result is expressed as verbatim text. | Value must be represented as at least one of {value_as_number, value_as_string or values_as_concept_id}. There are a few exceptions in vocabulary id PCORNet where all three value_as_\* fields are NULL.
`value_as_concept_id` | No (see convention) |Provide When Available| Integer | A foreign key to an observation result stored as a concept identifier. This is applicable to observations where the result can be expressed as a standard concept from the Vocabulary (e.g., positive/negative, present/absent, low/high, etc.). | Value must be represented as at least one of {value_as_number, value_as_string or values_as_concept_id}. There are a few exceptions in vocabulary id PCORNet where all three value_as_\* fields are NULL.
`qualifier_concept_id` | No |Provide When Available| Integer | A foreign key to standard concept identifier for a qualifier (e.g severity of drug-drug interaction alert) | <p>Predefined value set (valid concept_ids found in CONCEPT table where domain_id='Observation' and concept_class_id ='Qualifier Value')</p> <p>select \* from concept where domain_id='Observation' and concept_class_id ='Qualifier Value' yields 10496 valid concept_ids.</p> <p>For **DRG VALUES**, please use the following: <ul><li>Primary/Principal: concept_id = 4269228 </li><li>Secondary: concept_id = 4093903</li></ul><p>If you are unable to distinguish between primary and secondary DRG type. Please map to the following: <ul><li>Secondary: concept_id = 4093903</li></ul></p> <p>If none are correct, use concept_id = 0.</p>
`unit_concept_id` | No | Provide When Available|Integer | A foreign key to a standard concept identifier of observation units in the Vocabulary. | <p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where domain_id='Unit' and vocabulary_id ='UCUM')</p> <p>select \* from concept where domain_id='Unit' and vocabulary_id ='UCUM' yields 971 valid concept_ids.</p> <p>If none are correct, use concept_id = 0.</p>
`provider_id` | No | Provide When Available|BigInteger | A foreign key to the provider in the provider table who was responsible for making the observation.
`visit_occurrence_id` | No |Provide When Available| BigInteger | A foreign key to the visit in the visit table during which the observation was recorded.
`observation_source_value` | Yes |Yes| Varchar | The observation code as it appears in the source data. This code is mapped to a standard concept in the Vocabulary and the original code is, stored here for reference.
`observation_source_concept_id`| No |Provide When Available|Integer | A foreign key to a concept that refers to the code used in the source. | <p>**If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0**</p>
`unit_source_value` | No |Provide When Available| Integer | The source code for the unit as it appears in the source data. This code is mapped to a standard unit concept in the Vocabulary and the original code is, stored here for reference.
`qualifier_source_value` |No |Provide When Available| Varchar | The source value associated with a qualifier to characterize the observation| For DRG Values, please populate information pertaining to "Primary" or "Secondary" DRG Status as it corresponds to the concept id value at your site.
`value_source_value` | Yes |Provide When Available| Varchar| The source value associated with the actual observation in the source | Source value should be represented as at least one of {value_as_number, value_as_string or values_as_concept_id}.

**If a field marked as "Provide when available" for the network requirement is not available at your site, please relay this information to the DCC**

#### 1.9.1 Additional Notes

- The 1/1/2009 date limitation that is used to define a PEDSnet active patient is \*\*NOT\*\* applied to observations. All observations are included for an active patient. For PEDSnet CDM v4.6, we limit observations to only those that appear in Table 1.
- Observations have a value represented by one of a concept ID, a string, \*\*OR\*\* a numeric value.
- The Visit during which the observation was made is recorded through a reference to the VISIT_OCCURRENCE table. This information is not always available.
- The Provider making the observation is recorded through a reference to the PROVIDER table. This information is not always available.
- Observations obtained using standardized methods (e.g. laboratory assays) that produce discrete results are recorded by preference in the MEASUREMENT table.

## 1.10 OBSERVATION PERIOD

The observation period domain is designed to capture the time intervals in which data are being recorded for the person. An observation period is the span of time when a person is expected to have a clinical fact represented in the PEDSNet Version 4.6 data model. This table is used to generate the PCORnet CDM enrollment table.

While analytic methods can be used to calculate gaps in observation periods that will generate multiple records (observation periods) per person, for PEDSnet, the logic has been simplified to generate a single observation period row for each patient. This logic can be found [here](https://github.com/PEDSnet/dcc-loader/blob/master/load-data/generate_obs_period.psql)

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`observation_period_id` | Yes |Yes| BigInteger | A system-generate unique identifier for each observation period | This is not a value found in the EHR. Sites may choose to use a sequential value for this field.
`person_id` | Yes |Yes| BigInteger | A foreign key identifier to the person who is experiencing the condition. The demographic details of that person are stored in the person table.
`observation_period_start_date` | Yes |Yes| Date | The start date of the observation period for which data are available from the data source | <p>Use the earliest clinical fact date available for this patient.</p> No date shifting.  
`observation_period_end_date` | Yes | Yes|Date | The end date of the observation period for which data are available from the source. | <p>Use the latest clinical fact date available for this patient. If there exists one or more records in the DEATH table for this patient, use the latest date recorded in that table.</p> 
`observation_period_start_time` | Yes | Yes|Datetime | The start date of the observation period for which data are available from the data source | <p>Use the earliest clinical fact time available for this patient.</p> No date shifting.  Full date and time. **If there is no time associated with the date assert midnight for the start time**
`observation_period_end_time` | Yes |Yes| Datetime | The end date of the observation period for which data are available from the source. | <p>Use the latest clinical fact time available for this patient. If there exists one or more records in the DEATH table for this patient, use the latest date recorded in that table.</p> For patients who are still in the hospital or ED or other facility at the time of data extraction, leave this field NULL.  Full date and time.  **If there is no time associated with the date assert 11:59:59 pm for the end time**
`period_type_concept_id`|Yes|Yes|Integer|A foreign key for the period type for each observation period record.

**If a field marked as "Provide when available" for the network requirement is not available at your site, please relay this information to the DCC**

#### 1.10.1 Additional Notes

- Because the 1/1/2009 date limitation for "active patients" is not used to limit visit_occurrence, the start_date of an observation period for an active PEDSnet patient may be prior to 1/1/ 2009.


## 1.11 DRUG EXPOSURE

The drug exposure domain captures any biochemical substance that is introduced in any way to a patient. This can be evidence of prescribed, over the counter, administered (IV, intramuscular, etc), immunizations or dispensed medications. These events could be linked to procedures or encounters where they are administered or associated as a result of the encounter.

EHRs may store medications in different vocabularies (GPI,NDC etc). 

Exclusions:

1. Cancelled Medication Orders
2. Missed Medication administrations

**Note 1**: The `effective_drug_dose` is the dose basis.(E.g. 45 mg/kg/dose). This is the discrete dose value from the source data if available. If the discrete dose value is **not** available from the source data, provide the dose information available for the medication.

The dose_unit_concept_id is the unit of the effective dose.

Please use the following logic to populate the effective_dose and dose unit based on what is available in your source system:

Site Information | Effective Drug Dose | Dose Unit Concept Id  | Dose Unit Source Value
--- | --- | --- | ---
Dose Basis (calcualted effective dose) Available  (E.g. 90 mg/kg) | 90 | Corresponding concept for unit (E.g. mg/kg = 9562)| mg/kg
Only Dose Avaiable (E.g. 450 mg)) | 450 | Corresponding Concept for unit (E.g. mg = 8576) |mg
No discrete dosing information | | 0| 

**Note 2**: The quantity is the actual dose given. (E.g. 450 mg for 10 kg patient) Extract numbers as much as possible , full value should be a part of the xml sig field.

**Note 3**: For dispensing records, provide the dose basis if available. Otherwise provide the dose information.

**Note 4:** For the sig, encode the value using XML. 

<ul> <li> Element 1: Actual SIG from source data </li> <li> Element 2: Raw "Supply/Quantity" (Examples: "1 bottle" "10 ml Bottle" "1 pack"</li> <li>Element 3: Refills</li></ul>

```xml
    <XML>
    <SIG>1/2 capful in 4 oz clear liquid</SIG>
    <QUANTITY>1 jar</QUANTITY>
    <REFILLS>2</REFILLS>
    </XML>
```
**Note 5:** If there are multiple RxNorm mappings associate with a mapping, choose the mapping in the following order and stop when you find your first match.

1. BPCK (Branded Pack)
2. GPCK (Clinical Pack)
3. SBD (Branded Drug, Quant Branded Drug)
4. SCD (Clinical Drug, Quant Clinical Drug)
5. SBDF (Branded Drug Form)
6. SCDF (Clinical Drug Form)
7. MIN (Ingredient)
8. SBDC
9. SCDC
10. PIN (Ingredient)
11. IN (Ingredient)

**Note 6**: Please use the following table as a guide to determine how to populate the `drug_source_value`, `drug_source_concept_id` and `drug_concept_id` for Drug Exposure Values

You have in your source system | Drug_source_value| Drug_source_conept_id | Drug_concept_id
---|---|---|---
Drug code is GPI/Multum/Other code | <ul><li> GPI/Multum/Other Code</li><li>Local name \| GPI/Multum/Other</li></ul> (any above are OK) | OMOP’s concept_id for GPI/Multum/Other code | RxNorm code that corresponds to a mapping from `concept_relationship`
Drug code is RxNorm | <ul><li> RxNorm Code</li><li>Local name or</li><li>Local name \| RxNorm code</li></ul> (any above are OK) |Corresponding RxNorm concept_id mapping| Corresponding RxNorm concept_id mapping|

**Note 7**: For medication administration events, please store all events as single drug exposure entries.

**Note 8**: Please make an effort to include the inpatient medication order in the drug_exposure table and ***if*** able to please link these orders using the fact relationship table. Below is an example of how to do so:
Example: Person_id = 12345 during their inpatient stay (visit_occurrence_id = 678910) had a medication order for Diazepam Oral Soln 1 MG/ML and it was administered 3 times (every 12 hours).

Four rows will be inserted into the drug_exposure table. Showing only the relevant columns:

drug_exposure_id | Person_id | Visit_occurrence_id | drug_concept_id | drug_type_concept_id |effective_drug_dose
 --- | --- | --- | --- | --- | --- |
1111 | 12345 | 678910 | 19076372 |581373 (Physician Administered-EHR Order)|0.12 |  
1112 | 12345 | 678910 | 19076372 | 38000180 (Inpatient Administration) | 0.12 |
1113 | 12345 | 678910 | 19076372 | 38000180 (Inpatient Administration) |0.12 |
1114 | 12345 | 678910 | 19076372 | 38000180 (Inpatient Administration) |0.12|

- drug_type_concept_id for Inpatient Medication Order = 581373 (Physician administered drug (identified from EHR order))
- drug_type_concept_id for Inpatient Administration= 38000180 (Inpatient Administration)

To link these two values, use the fact relationship table (**OPTIONAL FOR PEDSnet v4.6**):

Domain_concept_id_1 | fact_id_1 | Domain_concept_id_2 | fact_id_2 | relationship_concept_id
--- | --- | --- | --- | ---
Drug | 1111 | Drug  | 1112 |  Occurrence of
Drug|  1111 | Drug | 1113 |  Occurrence of
Drug | 1111| Drug |  1114 |  Occurrence of
Drug| 1112 | Drug| 1111 |  Subsumes
Drug| 1113 | Drug | 1111 |  Subsumes
Drug| 1114 | Drug | 1111 |  Subsumes

Because the domain concept id and relationship concept id are integers the following is an example of how this data will be represented:

Domain_concept_id_1 | fact_id_1 | Domain_concept_id_2 | fact_id_2 | relationship_concept_id
--- | --- | --- | --- | ---
13 | 1111 | 13 | 1112 |  44818848
13|  1111 | 13 | 1113 |  44818848
13 | 1111| 13 |  1114 | 44818848
13| 1112 | 13 | 1111 |  44818723 
13| 1113 | 13 | 1111 |  44818723 
13| 1114 | 13 | 1111 |  44818723 



Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`drug_exposure_id` | Yes |Yes| BigInteger | A system-generated unique identifier for each drug exposure | This is not a value found in the EHR. Sites may choose to use a sequential value for this field.
`person_id` | Yes |Yes|BigInteger | A foreign key identifier to the person who is experiencing the condition. The demographic details of that person are stored in the person table.
`drug_concept_id`| Yes |Yes| Integer | A foreign key that refers to a standard drug concept identifier in the Vocabulary. | Valid drug concept IDs are mapped to RxNorm using the source to concept map table to transform source codes (GPI, NDC etc to the RxNorm target). In the event of multiple RxNorm mappings please see Note 5. See note 6 for guide.
`drug_exposure_start_date`| Yes |Yes| Date |The start date of the utilization of the drug. The start date of the prescription, the date the prescription was filled, the date a drug was dispensed or the date on which a drug administration procedure was recorded are acceptable. | If the start date of the drug is null in the source system, use the ordering date as the start date. No date shifting. 
`drug_exposure_end_date`| No |Provide When Available|Date | The end date of the utilization of the drug | No date shifting.
`drug_exposure_order_date`| No | Provider When available| Date | The order date of the drug | No date shifting.
`drug_exposure_start_datetime`| Yes |Yes| Datetime |The start date and time of the utilization of the drug. The start date of the prescription, the date the prescription was filled, the date a drug was dispensed or the date on which a drug administration procedure was recorded are acceptable. | No date shifting. Full date and time. **If there is no time associated with the date assert midnight for the start time**|
`drug_exposure_end_datetime`| No |Provide When Available|Datetime | The end date and time of the utilization of the drug | No date shifting. Full date and time.  **If there is no time associated with the date assert 11:59:59 pm for the end time**|
`drug_exposure_order_datetime`| No | Provider When available| Datetime | The order date and time of the drug |If the start datetime of the drug is null in the source system, use the ordering datetime as the start datetime. No date shifting.Full date and time. **If there is no time associated with the date assert midnight for the start time**
`drug_type_concept_id`| Yes | Yes|Integer | A foreign key to a standard concept identifier of the type of drug exposure in the Vocabulary as represented in the source data | <p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where concept_class_id ='Drug Type')</p> <p>select \* from concept where domain_id ='Drug Type' yields 13 valid concept_ids.</p> <p>If none are correct, use concept_id = 0.</p> For the PEDSnet drug types listed above, use the following concept_ids: <ul><li>Prescription dispensed in pharmacy (dispensed meds pharma information): concept_id = 38000175</li> <li>Inpatient Medication Order: 581373</li><li>Inpatient administration (MAR entries): concept_id = 38000180</li> <li>Prescription written: concept_id = 38000177</li></ul>
`stop_reason`| No | Provide When Available|Varchar | The reason, if available, where the medication was stopped, as indicated in the source data. | <p>Valid values include therapy completed, changed, removed, side effects, etc. Note that a stop_reason does not necessarily imply that the medication is no longer being used at all, and therefore does not mandate that the end date be assigned.</p>
`refills`| No | Provide When Available|Integer | The number of refills after the initial prescription| See Note 2. Extract numbers as much as possible , full value should be a part of the xml sig field.|
`quantity`| No |Provide When Available| Integer | The quantity of the drugs as recorded in the original prescription or dispensing record| See Note 2. Extract numbers as much as possible , full value should be a part of the xml sig field.|
`days_supply`| No |Provide When Available| Integer | The number of days of supply the medication as recorded in the original prescription or dispensing record||
`sig`| No | Provide When Available|CLOB (XML Structure) | The directions on the drug prescription as recorded in the original prescription (and printed on the container) or the dispensing record| See Note 4|
`route_concept_id`| No |Provide When Available| Integer | A foreign key that refers to a standard administration route concept identifier in the Vocabulary. | <p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where domain_id='Route')</p> <p>select * from concept where domain_id='Route' and invalid_reason is null yields 70 valid concept_ids.</p> <p><ul><li>Within the set of 70 valid concept ids, duplicates may exist. If this is the case, use the standard concept (standard_concept='S') first for mapping and then the non-standard concept for all other cases</li></ul> If none are correct, use concept_id = 0. </p>
`effective_drug_dose`| No |Provide When Available| Float | Numerical value of drug dose for this drug_exposure record| See note 1|
`eff_drug_dose_source_value`| No |Provide When Available| Varchar | The drug dose for this drug_exposure record as it appears in the source| |
`dose_unit_concept_id`| No |Provide When Available| Integer | A foreign key to a predefined concept in the Standard Vocabularies reflecting the unit the effective drug_dose value is expressed|<p>**See note 1**</p> <p> Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where vocabulary_id = UCUM)</p> select * from concept where vocabulary_id = 'UCUM' yields 971 valid concept_ids.|
`lot_number`| No |Site preference| Varchar | An identifier to determine where the product originated||
`provider_id`| No |Provide When Available|  BigInteger | A foreign key to the provider in the provider table who initiated (prescribed) the drug exposure |<p>Any valid provider_id allowed (see definition of providers in PROVIDER table)</p> Document how selection was made.
`visit_occurrence_id`| No |Provide When Available|  BigInteger | A foreign key to the visit in the visit table during which the drug exposure initiated. | See VISIT.visit_occurrence_id (primary key)
`drug_source_value`| Yes|Yes|  Varchar | The source drug value as it appears in the source data. The source is mapped to a standard RxNorm concept and the original code is stored here for reference.| Please be sure to include your source code and the drug name in this field. This will be useful in the event that there is no RxNorm mapping for your local medication code. Please use the pipe delimiter "\|" when concatenating values. See note 6.
`drug_source_concept_id`| No |Provide When Available|  Integer | A foreign key to a drug concept that refers to the code used in the source | In this case, if you are transforming drugs from GPI or NDC to RXNorm. The concept id that corresponds to the GPI or NDC value for the drug belongs here. See note 6.  <p>**If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0**</p>
`route_source_value`| No|Provide When Available|  Varchar |The information about the route of administration as detailed in the source ||
`dose_unit_source_value`| No|Provide When Available|  Varchar | The information about the dose unit as detailed in the source ||
`frequency`| No | Optional | Varchar | The frequency information as available from the source ||
`dispense_as_written_concept_id`|No|Optional|Integer| A foreign key to value in the source for that determines if the medication is to be dispensed as written| <p> For PEDSnet CDM v4.6, please use the following: <ul><li>Yes=4188539 </li><li>No=4188540</li><li>No Information: concept_id = 44814650 vocabulary_id='PCORNet')</li> <li>Unknown: concept_id = 44814653</li> <li>Other: concept_id = 44814649</li></ul> If none are correct, use concept_id = 0. </p>

**If a field marked as "Provide when available" for the network requirement is not available at your site, please relay this information to the DCC**

#### 1.11.1 Additional Notes

- The 1/1/2009 date limitation that is used to define a PEDSnet active patient is \*\*NOT\*\* applied to drug exposures. All drug exposures are included for an active patient. 
- The Visit during which the drug exposure was initiated by is recorded through a reference to the VISIT_OCCURRENCE table. This information is not always available.
- The Provider initiating the drug exposure is recorded through a reference to the PROVIDER table. This information is not always available.

## 1.12 MEASUREMENT

The measurement domain captures measurement orders and measurement results. The measurement domain can contain laboratory results and vital signs.

Specifically this table includes:
- Height/length in cm (use numeric precision as recorded in EHR)
- Height/length type
- Weight in kg (use numeric precision as recorded in EHR)
- Body Mass Index 
- Temperature in degrees Celsius
- Head Circumference in cm (use numeric precision as recorded in EHR)
- BIRTH Height/length in cm (use numeric precision as recorded in EHR)
- BIRTH Height/length type
- BIRTH Weight in kg (use numeric precision as recorded in EHR)
- BIRTH Head Circumference in cm (use numeric precision as recorded in EHR)
- FVC in liters
- FVC pre (if recorded differently) in liters
- FVC post in liters
- FEV 1 in liters
- FEV 1 pre (if recorded differently) in liters
- FEV 1 post in liters
- FEF 25-75 in liters per minute
- FEF 25-75 pre (if recorded differently) in liters per minute
- FEF 25-75 post in liters per minute
- Peak Flow (PF) in milliteres per second
- Peak Flow post in milliteres per second
- Body mass index in kg/m<sup>2</sup> (extracted only if height and weight are not present)
- Systolic blood pressure in mmHg
    - Where multiple readings are present on the same encounter, create measurement records for \*\*ALL\*\* readings
- Diastolic blood pressure in mmHg
    - Where multiple readings are present on the same encounter, create measurement records for \*\*ALL\*\* readings
- Blood pressure position is described by the selection of a concept_id that contains the BP position as describe below. For example, in Table 1, concept_id 3018586 is Systolic Blood Pressure, Sitting. This concept_id identifies both the measurement (Systolic BP) and the BP position (sitting).
-  Invasive Mean arterial pressure (MAP)
-  Non - Invasive Mean arterial pressure (MAP)
-  Heart Rate
-  Oxygen Saturation (SpO2)
-  Respiration Rate
- Vital source
- Inspired oxygen concentration (FiO2)
- Peripheral oxygen saturation/fraction of inspired oxygen(SpO2/FiO2)
- Body Surface Area (BSA)
- All available component Level Labs. The Lab Listing and PEDSNet LOINC Mapping can be found [here] (https://github.com/PEDSnet/Data_Models/blob/master/PEDSnet/docs/PEDSnet_Component_Loinc_Mapping.xlsx)

**Table 3: Measurement concept IDs for PCORnet concepts. Concept_ids from vocabulary_id 99 are non-standard codes.**

Domain id | Measurement concept ID | Vocab ID | Value as concept ID | Concept description | Vocab ID
 --- | --- | --- | --- | --- | ---
Vital | 3013762 | | See Note 1 | Weight
Vital | 3023540 | | See Note 1 | Height
Vital | 21490852| | See Note 1 | Invasive Mean arterial pressure (MAP)
Vital | 21492241| | See Note 1 | Non-Invasive Mean arterial pressure (MAP)
Vital | 3027018 | | See Note 1 | Heart Rate
Vital | 40762499 | | See Note 1 | Oxygen Saturation (SpO2)
Vital | 3024171  | | See Note 1 | Respiration Rate
Vital | 3038553 | | See Note 3 | BMI kg/m<sup>2</sup>
Vital | 3034703 | | See Note 2 | Diastolic Blood Pressure - Sitting
Vital | 3019962 | | See Note 2 | Diastolic Blood Pressure - Standing
Vital | 3013940 | | See Note 2 | Diastolic Blood Pressure - Supine
Vital | 3012888 | | See Note 2 | Diastolic BP Unknown/Other
Vital | 3018586 | | See Note 2 | Systolic Blood Pressure - Sitting
Vital | 3035856 | | See Note 2 | Systolic Blood Pressure - Standing
Vital | 3009395 | | See Note 2 | Systolic Blood Pressure - Supine
Vital | 3004249 | | See Note 2 | Systolic BP Unknown/Other
Vital | 2000000041 | | See Note 3 | Weight for age z score NHANES
Vital | 2000000042 | | See Note 3 | Height for age z score NHANES
Vital | 2000000043 | | See Note 3 | BMI for age z score NHANES
Vital | 2000000044 | | See Note 3 | Weight for age z score WHO
Vital | 2000000045 | | See Note 3 | Height for age z score WHO
Vital | 2000000046 | | See Note 3 | Systolic BP for age/height Z score NCBPEP
Vital | 2000000047 | | See Note 3 | Diastolic BP for age/height Z score NCBPEP
Vital | 3020891 || See Note 1 | Temperature 
Vital | 3001537|| See Note 1| Head Circumference
Lab | 3020158|| See Note 1|  FVC
Lab | 3037879|| See Note 1|  FVC pre (if recorded differently)
Lab | 3001668|| See Note 1|  FVC post
Lab | 3024653|| See Note 1| FEV 1
Lab | 3005025|| See Note 1|  FEV 1 pre (if recorded differently)
Lab | 3023550|| See Note 1|  FEV 1 post
Lab | 42868460|| See Note 1|  FEF 25-75
Lab | 42868461|| See Note 1|  FEF 25-75 pre (if recorded differently)
Lab | 42868462|| See Note 1|  FEF 25-75 post
Lab | 3023329|| See Note 1|  Peak Flow (PF)
Lab | 2000000064|| See Note 1|  Peak Flow post
Vital | 3013762 | | See Note 7 | BIRTH Weight
Vital | 3023540 | | See Note 7 | BIRTH Height
Vital | 3001537|| See Note 7| BIRTH Head Circumference
Vital|4353936|SNOMED|See note 1|Inspired oxygen concentration (FiO2)
Vital|2000001422|PEDSnet|See note 1|Peripheral oxygen saturation/fraction of inspired oxygen(SpO2/FiO2)
Vital|3005424|LOINC|See Note 1 and 3|Body surface area (BSA)
Measurement Type | 44818704 | Measurement Type | See Note 3 | Patient reported
Measurement Type | 2000000032| Measurement Type | See Note 3 | Vital sign from device direct feed
Measurement Type | 2000000033| Measurement Type | See Note 3 | Vital sign from healthcare delivery setting
Measurement Type | 44818702| Measurement Type | See Note 4 | Clinical and Laboratory Results
Vital|	4101694 	|	See Note 1	||Peak inspiratory pressure| SNOMED
Vital|	44782827 |		See Note 1|	|Expiratory tidal volume| SNOMED	


**Note 1**: For height, weight, temperature, head circumference, BMI, Pulmary Function, heart rate, oxygen saturation, respiratory rate, FiO2, SpO2/FiO2 ratio, mean arterial pressure (MAP), Body Surface Area (BSA), Peak inspiratory pressure and Expiratory tidal volume measurements insert the recorded measurement into the value_as_number field.

<a name="measurement-note-2"/>**Note 2**:</a> Systolic and diastolic pressure measurements will generate two observation records one for storing the systolic blood pressure measurement and a second for storing the diastolic blood pressure measurement. Select the right SBP or DBP concept code that also represents the CORRECT recording position (supine, sitting, standing, other/unknown). To tie the two measurements together (the systolic BP measurement and the diastolic BP measurement records), use the FACT_RELATIONSHIP table.

Example: Person_id = 12345 on visit_occurrence_id = 678910 had orthostatic blood pressure measurements performed in the healthcare delivery setting as follows:

- Supine: Systolic BP 120; Diastolic BP 60
- Standing: Systolic BP 144; Diastolic BP 72

Four rows will be inserted into the measurement table. Showing only the relevant columns:

Measurement_id | Person_id | Visit_occurrence_id | measurement_concept_id | measurement_type_concept_id | Value_as_Number | Value_as_Concept_ID
 --- | --- | --- | --- | --- | --- | ---
66661 | 12345 | 678910 | 3009395 | 2000000033| 120 | |
66662 | 12345 | 678910 | 3013940 | 2000000033 | 60 | |
66663 | 12345 | 678910 | 3035856 | 2000000033 | 144 | |
66664 | 12345 | 678910 | 3019962 | 2000000033 | 72 | |

- Measurement_concept_id = 3009395 = systolic BP - supine; measurement_concept_id = 3013940 = diastolic BP supine
- Measurement_concept_id = 3035856 = systolic BP standing; measurement_concept_id = 3019962 = diastolic BP standing
- measurement_type_concept_id = 2000000033 (Vital Sign from healthcare delivery setting).

To link these two values, use the fact relationship table:

Domain_concept_id_1 | fact_id_1 | Domain_concept_id_2 | fact_id_2 | relationship_concept_id
--- | --- | --- | --- | ---
Measurement | 66661 | Measurement | 66662 |  Asso with finding 
Measurement | 66662 | Measurement | 66661 |  Asso with finding 
Measurement | 66663 | Measurement | 66664 |  Asso with finding 
Measurement | 66664 | Measurement | 66663 |  Asso with finding 

Because the domain concept id and relationship concept id are integers the following is an example of how this data will be represented:

Domain_concept_id_1 | fact_id_1 | Domain_concept_id_2 | fact_id_2 | relationship_concept_id
--- | --- | --- | --- | ---
21 | 66661 | 21 | 66662 |  44818792 
21 | 66662 | 21 | 66661 |  44818792 
21 | 66663 | 21 | 66664 |  44818792 
21 | 66664 | 21 | 66663 | 44818792


- Two rows in the FACT_RELATIONSHIP table link the *supine*  diastolic BP to the supine systolic BP.
- Two rows in the FACT_RELATIONSHIP table link the *standing* diastolic BP to the standing systolic BP.

**Note 3**: Measurement type concept_ids are used as values for the measurement_type_concept_id field.
In addition, the following observations are derived via the DCC (concept_ids to be assigned in future version of this document. However, concept_ids are not needed for ETL since these observations will be derived/calculated using scripts developed by DCC):

- Body mass index in kg/m<sup>2</sup> if not directly extracted
- Height/length z score for age/sex using NHANES 2000 norms for measurements at which the person was <240 months of age. In the absence of a height/length type for the measurement, recumbent length is assumed for ages \<24 months, and standing height thereafter.
- Weight z score for age/sex using NHANES 2000 norms for measurements at which the person was \<240 months of age.
- BMI z score for age/sex using NHANES 2000 norms for visits at which the person was between 20 and 240 months of age.
- Systolic BP z score for age/sex/height using NHBPEP task force fourth report norms.
- Diastolic BP z score for age/sex/height using NHBPEP task force fourth report norms.
- Body Surface Area (BSA) (if site not providing height and weight)

**Note 4**: For PEDSnet v4.6, PCORI has requested that sites provide all labs available. 

- Sites will determine what labs constitute "all labs" at their site. There is no obligation to go outside your main lab result system or source tables.
- Sites will not send text labs that potentially contain PHI in the source value.

Please use the following table as a guide to determine how to populate the `measurement_source_value`, `measurement_source_concept_id` and `measurement_concept_id` for LAB Values. 

*As a general rule, first map to the PEDSnet standard LOINC List for corresponding labs in the network listing. If the lab does not exist in the network listing, send local LOINC Code where available. If there is no local LOINC Code available, map to zero for the `measurement_concept_id`*

**Note 5**:For lab results, please include the closest result to the **final** result available at the time of your extraction from the source.


You have in your source system |Network Listing Lab| Measurement_source_value| Measurement_source_concept_id | measurement_concept_id
---|---|---|--- | ---
Lab code is institutional-specific code (not CPT/not LOINC) | **Yes**| <ul><li> Local code or</li><li>Local name or</li><li>Local name \| Local code</li></ul> (any above are OK) | 0 (zero) | PEDSnet LOINC code’s concept_id (provided by DCC)
Lab code is CPT code | **Yes** | <ul><li> CPT Code</li><li>Local name or</li><li> Local name \|CPT code</li></ul> (any above are OK) | OMOP’s concept_id for CPT code | PEDSnet’s LOINC code’s concept_id (provided by DCC)
Lab code is LOINC code that is same as PEDSnet’s LOINC code |**Yes**| <ul><li> LOINC Code</li><li>Local name or</li><li> Local name \| LOINC code  </li></ul> (any above are OK) |PEDSnet’s LOINC code’s concept_id (provided by DCC)| PEDSnet’s LOINC code’s concept_id (provided by DCC)
Lab code is LOINC code that is different than PEDSnet LOINC | **No**|  Same as above | OMOP’s concept_id for your LOINC code | OMOP’s concept_id for your LOINC code
Lab code is LOINC code (and not a part of Network Lab listing)|**No** | <ul><li> LOINC Code</li><li>Local name or</li><li> Local name \| LOINC code  </li></ul> (any above are OK) |OMOP’s concept_id for your LOINC code| OMOP’s concept_id for your LOINC code
Lab code is institutional-specific code (not CPT/not LOINC) | **No** | <ul><li> Local code or</li><li>Local name or</li><li>Local name \| Local code</li></ul> (any above are OK) | 0 (zero) | 0 (zero)
Lab code is CPT code | **No** | <ul><li> CPT Code</li><li>Local name or</li><li> Local name \|CPT code</li></ul> (any above are OK) | OMOP’s concept_id for CPT code | 0 (zero)


**Note 5**: Please use the following table as a guide to determine how to populate the `range_low`,`range_low_source_value`,`range_low_operator_concept_id`, `range_high`, `range_high_source_value` and `range_low_operator_concept_id` for LAB Values

You have in your source system | range high/ range low | range high source value / range low source value | range low/high operator concept id
--- | --- | ---| ---
Numerical value `Examples: 7,8.2,100` | Numerical Value `Examples: 7,8.2,100` | Numerical value `Examples: 7,8.2,100`|4172703
Limits `Examples: <2, >100, less than 5` | Numerical Value of the limit `Examples: 2, 100, 5`| Limits `Examples: <2, >100, less than 5` | Corresponding concept to the modifier `Examples:4171756,4172704 ,4171756 `
Categorical/Qualitative Value `Examples: HIGH,LOW,POSITIVE,NEGATIVE`||Categorical/Qualitative Value `Examples: HIGH,LOW,POSITIVE,NEGATIVE`|0

**Note 6**: Please only include final Lab Results.

**Note 7**: For BIRTH height, weight and head cirucmference records please use the `measurement_type_concept_id` = 44818704.


Exclusions:

1. Cancelled Lab orders
2. Lab orders that are 'NOT DONE' or 'INCOMPLETE'

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`measurement_id` | Yes |Yes|  BigInteger | A system-generated unique identifier for each measurement | This is not a value found in the EHR. Sites may choose to use a sequential value for this field.
`person_id` | Yes |Yes|  BigInteger | A foreign key identifier to the person who the measurement is being documented for. The demographic details of that person are stored in the person table.
`measurement_concept_id` | Yes |Yes|  Integer | A foreign key to the standard measurement concept identifier in the Vocabulary. | <p>Valid Measurement Concepts belong to the "Measurement" domain. Measurement Concepts are based mostly on the LOINC vocabulary, with some additions from SNOMED-CT.</p> <p>Measurement must have an object represented as a concept, and a finding. A finding (see below) is represented as a concept, a numerical value or a verbatim string or more than one of these.</p> <p>There are three Standard Vocabularies defined for measurements:</p> <p>Laboratory tests and values: Logical Observation Identifiers Names and Codes (**LOINC**) (Vocabulary_id=LOINC).</p> <p>(FYI: Regenstrief also maintains the **"LOINC Multidimensional Classification"** Vocabulary_id=LOINC Hierarchy)</p> <p>Qualitative lab results: A set of SNOMED-CT Qualifier Value concepts (vocabulary_id=SNOMED)</p> <p>Laboratory units: Unified Code for Units of Measure (**UCUM**( )Vocabulary_id=UCUM)</p> <p>All other findings and observables: SNOMED-CT (Vocabulary_id=SNOMED).</p> For vital signs, pull information from flow sheet rows (EPIC sites only). For lab values, please see Note 4.
`measurement_date`|  Yes |Yes|  Date | The date of the measurement.|For lab orders, this should be the specimen collection time. No date shifting.
`measurement_datetime`|  Yes |Yes|  Datetime | The time of the measurement. | For lab orders, this should be the specimen collection time. No date shifting.  Full date and time. If there is no time associated with the date assert midnight.
`measurement_order_date`| No| Provide When Available| Date | This field applies to Lab Orders only. This is the date the lab was ordered in the source. | No date shifting.
`measurement_order_datetime`| No| Provide When Available| Datetime | This field applies to Lab Orders only. This is the time the lab was ordered in the source. | No date shifting. Full date and time. If there is no time associated with the date assert midnight.
`measurement_result_date`| No | Provide When Available| Date | This field applies to Lab Orders only. This is the date the lab resulted in the source. | No date shifting.
`measurement_result_datetime`| No| Provide When Available| Datetime | This field applies to Lab Orders only. This is the time the lab resulted in the source. | No date shifting. Full date and time. If there is no time associated with the date assert midnight.
`measurement_type_concept_id` | Yes |Yes|  Integer | A foreign key to the predefined concept identifier in the Vocabulary reflecting the type of the measurement. | <p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where vocabulary_id =Meas Type or concept_class_id='Meas Type')</p> <p>select \* from concept where vocabulary_id ='Meas Type' or concept_class_id='Meas Type' yields 8 valid concept_ids.</p> For PEDSnet CDM v4.6, please use the following: <ul><li>Vital Sign from healthcare delivery setting= 2000000033</li><li>Vital Sign from healthcare device= 2000000032</li><li>Clinical and Laboratory result =  44818702</li><li>Pathology finding = 44818703</li><li>Patient reported value = 44818704</li> <li> Derived Value = 45754907</li></ul> 
`operator_concept_id`| No|Provide When Available|  Integer | A foreign key identifier to the mathematical operator that is applied to the value_as_number.Operators are <, ≤, =, ≥, >| Valid operator concept id are found in the concept table <p> select \* from concept where domain_id='Meas Value Operator' yields 5 valid concept ids. <ul> <li> Operator <= : 4171754 </li> <li> Operator >= : 4171755      </li> <li> Operator < : 4171756 </li> <li> Operator =   4172703 </li> <li> Operator > : 4172704 </li> </ul>|
`value_as_number` | No (see convention) | Provide When Available| Float | The measurement result stored as a number. This is applicable to measurements where the result is expressed as a numeric value. | Value must be represented as at least one of {value_as_number or values_as_concept_id}.
`value_as_concept_id` | No (see convention) |Provide When Available|  Integer | A foreign key to a measurement result stored as a concept identifier. This is applicable to measurements where the result can be expressed as a standard concept from the Vocabulary (e.g., positive/negative, present/absent, low/high, etc.). | Value must be represented as at least one of {value_as_number or values_as_concept_id}. Valid concepts are found in the concept table <p> select \* from concept where domain_id='Meas Value' and concept_class_id='Qualifier Value' and standard_concept='S' yields 186 valid concept ids.</p>
`unit_concept_id` | No |Provide When Available|  Integer | A foreign key to a standard concept identifier of measurement units in the Vocabulary. | <p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where vocabulary_id = UCUM)</p> <p>select \* from concept where vocabulary_id = 'UCUM' yields 971 valid concept_ids.</p> <p>If none are correct, use concept_id = 0.</p> For the PEDSnet measurements listed above, use the following concept_ids: <ul><li>Centimeters (cm): concept_id = 8582</li> <li>Kilograms (kg): concept_id = 9529</li> <li>Kilograms per square meter (kg/m<sup>2</sup>): concept_id = 9531</li> <li>Millimeters mercury (mmHG): concept_id = 8876</li> <li>degree Celsius (C): 8653</li> <li>Liters (L): 8519 </li><li>Liters per minute (L/min): 8698 </li><li>Milliliters per second (mL/sec): 44777614 </li> <li>Per Min (/min): 8541</li><li>Pecent (%): 8554</li></ul>
`unit_source_concept_id`| No| Provide When Available| Integer | A foreign key to a concept that refers to the code used in the source for the unit.| This is the concept id that maps to the source value in the standard vocabulary. <p>**If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0**</p>
`range_low` | No | Provide When Available| Float |  The lower limit of the normal range of the measurement. It is not applicable if the measurement results are non-numeric or categorical, and must be in the same units of measure as the measurement value.
`range_low_source_value` | No | Provide When Available| Varchar |  The lower limit of the normal range of the measurement as it appears in the source. | See note 5
`range_low_operator_concept_id` | No | Optional | Integer|A foreign key to the modifier of lower limit of the normal range of the measurement as it appears in the source as a concept identifier. | See note 5
`range_high` | No | Provide When Available| Float | The upper limit of the normal range of the measurement. It is not applicable if the measurement results are non-numeric or categorical, and must be in the same units of measure as the measurement value.
`range_high_source_value` | No | Provide When Available| Varchar | The upper limit of the normal range of the measurement as it appears in the source. | See note 5
`range_high_operator_concept_id` | No | Optional | Integer|A foreign key to the modifier of higher limit of the normal range of the measurement as it appears in the source as a concept identifier. | See note 5
`provider_id` | No | Provide When Available| BigInteger | A foreign key to the provider in the provider table who was responsible for making the measurement.
`visit_occurrence_id` | No |Provide When Available|  BigInteger | A foreign key to the visit in the visit table during which the observation was recorded.
`measurement_source_value` | Yes |Yes|  Varchar | The measurement name as it appears in the source data. This code is mapped to a standard concept in the Standardized Vocabularies and the original code is, stored here for reference.| This is the name of the value as it appears in the source system. Please use the pipe delimiter "\|" when concatenating values. For lab values, please see Note 4.
`measurement_source_concept_id`| No| Provide When Available| Integer | A foreign key to a concept that refers to the code used in the source.| This is the concept id that maps to the source value in the standard vocabulary. <p>**If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0**</p>
`unit_source_value`| No| Provide When Available| Varchar | The source code for the unit as it appears in the source data. This code is mapped to a standard unit concept in the Standardized Vocabularies and the original code is, stored here for reference.| Raw unit value (Ounces,Inches etc) For lab values, please see Note 4.
`value_source_value`| Yes |Yes|  Varchar | The source value associated with the structured value stored as numeric or concept. This field can be used in instances where the source data are transformed|<ul> <li>For BP values include the raw 'systolic/diastolic' value E.g. 120/60</li><li>If there are transformed values (E.g. Weight,Height, Head Circumference, Pulmonary Function Values and Temperature) please insert the raw data before transformation.</li></ul> For Categorical/Qualitative Lab result values, please use this field to store the raw result from the source.
`specimen_concept_id`| No| Optional | Integer| This field is applicable for lab values only. A foreign key to a concept that refers to the specimen source.| This is the concept id that maps to the specimen source value in the standard vocabulary. <p>**If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0**</p> <p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where domain_id='Specimen' and vocabulary_id='SNOMED' and concept_class_id='Specimen' and standard_concept='S' and invalid_reason is null)</p> <p>select \* from concept where domain_id='Specimen' and vocabulary_id='SNOMED' and concept_class_id='Specimen' and standard_concept='S' and invalid_reason is null</p> **The specimen_source_value column consists of the "SPECIMEN TYPE\|SPECIMEN SOURCE". When mapping using the above mentioned valueset, please attempt to map using the "SPECIMEN TYPE" first. If the "SPECIMEN TYPE" is not available at your site, please map using the "SPECIMEN SOURCE"**
`specimen_source_value`| No| Provide When Available| Varchar | This field is applicable for lab values only. This source value for the specimen source as it appears in the source| Please populate this value as a pipe delimited field "SPECIMEN TYPE\|SPECIMEN SOURCE" Eg. "URINE\|CATHETER"
`priority_concept_id`| No| Provide When Available | Integer| This field applies to Lab Orders only. A foreign key to a concept that refers to the lab priority as described in the source|<p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where domain_id='Procedure' and vocabulary_id='PEDSnet' and concept_class_id='Qualifier Value')</p> <p>select \* from concept where (domain_id='Procedure' and vocabulary_id='PEDSnet' and concept_class_id='Qualifier Value') or (vocabulary_id='PCORNet' and concept_class_id='Undefined')  yields 7 valid concept_ids.</p> For PEDSnet CDM v4.6, please use the following: <ul><li>Expedited (includes Today)=2000000059 </li><li>STAT (includes ASAP)=2000000060</li><li>Routine = 2000000061 </li><li>Timed = 2000000062 </li><li>No Information: concept_id = 44814650 vocabulary_id='PCORNet')</li> <li>Unknown: concept_id = 44814653</li> <li>Other: concept_id = 44814649</li></ul> 
`priority_source_value`| No| Provide When Available |  Varchar|This field applies to Lab Orders only. The lab priority as described in the source|

**If a field marked as "Provide when available" for the network requirement is not available at your site, please relay this information to the DCC**

#### 1.12.1 Additional Notes

- The 1/1/2009 date limitation that is used to define a PEDSnet active patient is \*\*NOT\*\* applied to measurements. All measurements are included for an active patient. For PEDSnet CDM v4.6, we limit measurements to only those that appear in Table 3 (for vital signs).
- Measurements have a value represented by one of a concept ID, a string, \*\*OR\*\* a numeric value.
- The Visit during which the measurement was made is recorded through a reference to the VISIT_OCCURRENCE table. This information is not always available.
- The Provider making the measurement is recorded through a reference to the PROVIDER table. This information is not always available.

## 1.13 FACT RELATIONSHIP

The fact relationship domain contains details of the relationships between facts within one domain or across two domains, and the nature of the relationship. Examples of types of possible fact relationships include: person relationships (mother-child linkage), care site relationships (representing the hierarchical organization structure of facilities within health systems), drug exposures provided due to associated indicated condition, devices used during the course of an associated procedure, and measurements derived from an associated specimen. All relationships are directional, and each relationship is represented twice symmetrically within the fact relationship table. 

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`domain_concept_id_1`|Yes|Yes| Integer |	The concept representing the domain of fact one, from which the corresponding table can be inferred.| Predefined value set: <ul><li>Visit domain (ED->Inpatient linking) = 8</li><li>Measurement domain (blood pressure linking) = 21</li><li>Observation domain (tobacco linking) = 27</li><li> Drug Domain (Inpatient Medication Orders) = 13</li></ul>
`fact_id_1`|	Yes |Yes| BigInteger |The unique identifier in the table corresponding to the domain of fact one.| 
`domain_concept_id_2`|Yes |Yes| Integer |	The concept representing the domain of fact two, from which the corresponding table can be inferred.| Predefined value set: <ul><li>Visit domain (ED->Inpatient linking) = 8</li><li>Measurement domain (blood pressure linking) = 21</li><li>Observation domain (tobacco linking) = 27</li><li> Drug Domain (Inpatient Medication Orders) = 13</li></ul>
`fact_id_2` |	Yes |Yes|BigInteger|	The unique identifier in the table corresponding to the domain of fact two.
`relationship_concept_id`	|Yes |Yes| Integer |A foreign key to a standard concept identifier of relationship in the Standardized Vocabularies.| Predefined value set: <ul><li>Occurs before (ED Visit) = 44818881</li><li>Occurs after (Inpatient Visit) = 44818783</li><li>Associated with finding (blood pressures) = 44818792</li><li>Occurrence of (Inpatient Medication Orders=44818848 </li><li>Subsumes (Inpatient Medication Orders=44818723 </li><li>No matching concept (tobacco) = 0</li></ul>

**If a field marked as "Provide when available" for the network requirement is not available at your site, please relay this information to the DCC**

#### 1.13 Additional Notes
- Blood Pressure Systolic and Diastolic Blood Pressure Values will be mapped using the fact relationship table. See [Note 2 in the Measurement section](PEDSnet_CDM_ETL_Conventions.md#measurement-note-2) for instructions.
- ER Visits that result in an Inpatient Encounter will be mapped using the fact relationship table. See [Additional Notes in the Visit Occurrence section](PEDSnet_CDM_ETL_Conventions.md#161-additional-notes) for instructions.
- Tobacco, smoking and tobacco type associations will be mapped using the fact relationship table. See [Note 4 in the Observation section](PEDSnet_CDM_ETL_Conventions.md#observation-note-4) for instructions.
- For Version 4.6 of PEDSnet, the inpatient medication orders and administrations linking is ***optional***. See [Note 8 in the Drug_Exposure section](PEDSnet_CDM_ETL_Conventions.md#111-drug-exposure-1)
- Ventilaors, Ventilator Settings and Ventilator Measurements will be mapped using the fact relationship tbale. See the [CDM Ventilator Pilot Guidance](https://github.com/PEDSnet/Data_Models/blob/master/PEDSnet/docs/CDM%20Ventilator%20Pilot/%20Ventilator%20Pilot%20Guidance.md).

## 1.14 VISIT_PAYER

The visit payer table documents insurance information as it relates to a visit in visit_occurrence. For this reason the key of this table will be visit_occurrence_id and visit_payer_id. **This table is CUSTOM to PEDSnet.**

**Note 1**: There can be multiple payers (primary/secondary) for a single visit. If you are able to obtain multiple payer information at your site please populate the visit payer table with this information. If you are not able to obtain secondary or additional payers for your visit occurrences at your site, please populate the primary payer and inform the DCC.

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`visit_payer_id` | Yes |Yes|  BigInteger |A system-generated unique identifier for each visit payer relationship. | This is not a value found in the EHR. Sites may choose to use a sequential value for this field.
`visit_occurrence_id` | Yes |Yes| BigInteger | A foreign key to the visit in the visit table where the payer was billed for the visit.
`plan_name` | Yes |Yes|  Varchar| The untransformed payer/plan name from the source data
`plan_type` | No |Provide When Available|  Varchar |  A standardized interpretation of the plan structure | Please only map your plan type to the following categories: <ul> <li>HMO</li> <li>PPO</li> <li>POS</li> <li>Fee for service</li><li> Other/Unknown </li></ul> If the categories are unclear, please work with your billing department or local experts to determine how to map plans to these values.
`plan_class` | Yes |Yes|  Varchar | A list of the "payment sources" most often used in demographic analyses| Please map your plan type to the following categories: <ul> <li>Private/Commercial</li> <li>Medicaid/sCHIP</li> <li>Medicare</li> <li>Other public</li> <li>Self-pay</li> <li>Other/Unknown</li></ul> Please work with your billing department or local experts to determine how to map plans to these values.
`visit_payer_type_concept_id`| No| Optional| Integer| A foreign key to a concept that refers to the status of the payer in the source.| This is the concept id that maps to the source value in the standard vocabulary. <p>**If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0**</p> For PEDSnet v4.6, use the following concept_ids: <ul><li>Payer is primary" concept_id = 31968</li> <li>Payer is secondary: concept_id = 31969</li></ul> <p>If you are unable to distinguish between primary and secondary payers. Please map to the following: <ul><li>Payer is secondary: concept_id = 31969</li></ul></p>

**If a field marked as "Provide when available" for the network requirement is not available at your site, please relay this information to the DCC**

#### 1.14.3 Additional Notes
- If you cannot map your plan to any of the above values for plan_type or plan_class, please map them to Other/unknown, and inform the DCC if the above list of values is not complete or sufficient.

## 1.15 MEASUREMENT_ORGANISM

The measurement organism table contains organism information related to laboratory culture results in the measurement table. **This table is CUSTOM to PEDSnet.**

**Note 1**: There can be multiple organisms for a single culture laboratory result.

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`meas_organism_id` | Yes |Yes|  BigInteger |A system-generated unique identifier for each organism culture relationship. | This is not a value found in the EHR. Sites may choose to use a sequential value for this field.
`measurement_id` | Yes |Yes| BigInteger | A foreign key to the lab result in the measurement table where the organism was observed.
`person_id`|	Yes |Yes|	BigInteger|	A foreign key identifier to the person who the measurement is being documented for. The demographic details of that person are stored in the person table.|	
`visit_occurrence_id`| No |Provide When Available| BigInteger | A foreign key to the visit where the culture lab was ordered|
`organism_concept_id`| Yes |Yes|  Integer| A foreign key to a standard concept identifier for the organism in the Vocabulary.| <p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where vocabulary_id = SNOMED and concept_class_id= Organism and standard_concept=S)</p> <p>select \* from concept where vocabulary_id ='SNOMED' and concept_class_id='Organism' and standard_concept='S' yields 33039 valid concept_ids.</p>
`organism_source_value` | Yes |Yes|  Varchar | The organism value as it appears in the source.
`positivity_datetime`| No| Optional | Datetime| The estimated date and time of initial growth as reported in the source.|

**If a field marked as "Provide when available" for the network requirement is not available at your site, please relay this information to the DCC**

#### 1.15.1 Additional Notes
- The time to positivity field is marked as optional. Please inform the DCC in the provenance files if this data is available at your site.

## 1.16 ADT_OCCURRENCE

The adt_occurrence table contains information about distinct admission, discharge, or transfer events that occur as part of a clinical visit.  The typical use case is to identify portions of an inpatient admission that represent different levels of care or locations within a facility, but it can be used for additional characteristics of a visits (e.g. specialty consultation).  The time of each event must fall between the start and end times of the associated visit_occurrence.  **This table is CUSTOM to PEDSnet.**

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
 `adt_occurrence_id`| 	Yes	| Yes| 	BigInteger| 	A unique identifier for each ADT event.| This is not a value found in the EHR. Sites may choose to use a sequential value for this field
`person_id`| 	Yes| 	Yes	| BigInteger| 	A  foreign key identifier to the person for whom the visit is recorded.	
`visit_occurrence_id`| 	Yes| 	Yes| 	BigInteger	| A foreign key identifier to the visit containing this event.	
`adt_date`| 	Yes| 	Yes| 	Date	| The date of the adt event
`adt_datetime`	| Yes| 	Yes	| Datetime	| The datetime of the adt event|	No date shifting. Full date and time. If there is no time associated with the date assert midnight for the start time.
`care_site_id`| 	No| 	Provide when available| 	BigInteger| 	A foreign key to the care site in which this adt event occurred.	
`service_concept_id`| 	Yes	| Yes| 	Integer	| A foreign key that refers to a adt event service concept identifier in the vocabulary.  This concept describes the type of service associated with this adt event.	|<p>select \* from concept where vocabulary_id ='PEDSnet' and concept_class_id='Service Type' and standard_concept='S' yields 14 valid concept_ids.</p> **In PEDSnet CDM v4.6, only the NICU,CICU and PICU services are included.**<p>The value set available for PEDSnet includes:<ul> <li>	CICU (cardiac care) = 2000000079</li><li> NICU (neonatal care) = 2000000080</li><li> PICU (all other ICU) = 2000000078 </li><li>	Critical care = 2000000067</li><li>	Intermediate care = 2000000068 </li><li>	Acute care = 2000000069 </li><li>	Observation care = 2000000070 </li><li>	Surgical site (includes OR, ASC) = 2000000071  </li><li>	Procedural service = 2000000072  </li><li> Behavioral health =  2000000073  </li><li> Rehabilitative service (includes PT, OT, ST) = 2000000074 </li><li>	Specialty service = 2000000075</li><li> Radiology = 2000000076 </li><li> Hospital Outpatient = 2000000077 </li>li>Unknown: concept_id = 44814653 </li> <li>Other: concept_id =  44814649 </li> <li>No information: concept_id =  44814650</li></ul></p>
`adt_type_concept_id`|Yes| Yes| Integer| A foreign key that refers to an adt event type concept identifier in the vocabulary. This concept describes the type of the adt event. | <p>select \* from concept where vocabulary_id ='PEDSnet' and concept_class_id='ADT Event Type' yields 5 valid concept_ids.</p> <p> The value set for PEDSnet includes: <ul><li>Admission = 2000000083 </li><li>Discharge = 2000000084 </li>Transfer in = 2000000085 <li>Transfer out = 2000000086</li><li>Census = 2000000087</li></ul></p>
`prior_adt_occurrence_id`| No | Provide when available | BigInteger| Foreign key into the adt_occurrence table pointing to the ADT record immediately preceding this record in the event stream for the visit.  Must be populated for all but the first ADT even within a visit.
`next_adt_occurrence_id` | No | Provide when available | BigInteger| Foreign key into the adt_occurrence table pointing to the ADT record immediately following this record in the event stream for the visit.  Must be populated for all but the last ADT even within a visit.
`service_source_value`| 	No| 	Provide when available	| Varchar	| The source data used to derive the service type for this event.  It will typically be a department code from the ADT event.| 	
`adt_type_source_value`| No | Provide when available| Varchar| The source data used to identify the adt event type |

#### 1.16.1 Additional Notes
- If a site is splitting (ED->Inpatient) encounters into two records in visit_occurrence, the ADT_OCCURRENCE.visit_occurence_id should link to the Inpatient visit_occurrence_id.


## 1.17 Immunization

The immunization domain captures immunization records.**This table is CUSTOM to PEDSnet.**

**Note 1:**
Please use the following logic to populate the `immunization_concept_id`, `immunization_source_concept_id` and `immunization_source_value` based on what is available in your source system:

Site Information | immunization_concept_id|immunization_source_concept_id|immunization_source_value
--- | --- | --- | ---
Immunization Codes (NDC,RxNorm,CVX CPT-4, ICD-9-CM,ICD-10, HCPCS or OPCS-4) |Corresponding CVX Concept Code (may require manual mapping) |Corresponding Immunization Codes (NDC,RxNorm,CVX CPT-4, ICD-9-CM,ICD-10, HCPCS or OPCS-4) concept id | Immunization Name \| Immunization Source Code
Custom Immunization Coding (that site can map to coding within standard vocabulary) | Corresponding CVX Concept Code ( requires manual mapping) | Corresponding Immunization Codes (NDC,RxNorm,CVX CPT-4, ICD-9-CM,ICD-10, HCPCS or OPCS-4) concept id  |Immunization Name \| Custom Immunization Code
Custom Immunization Coding (that cannot be mapped using the standard vocabulary) | Corresponding CVX Concept Code (requires manual mapping) | 0  |Immunization Name \| Custom Immunization Code

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`immunization_id` | Yes |Yes|  BigInteger | A system-generated unique identifier for each immunization record | This is not a value found in the EHR. Sites may choose to use a sequential value for this field.
`person_id` | Yes |Yes|  BigInteger | A foreign key identifier to the person who the immunization record is being documented for. The demographic details of that person are stored in the person table.
`immunization_concept_id` | Yes |Yes|  Integer | A foreign key to the standard immunization concept identifier in the Vocabulary. |  <p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where vocabulary_id='CVX')</p> <p>select \* from concept where vocabulary_id='CVX' and invalid_reason is null yields 188 valid concept_ids.</p> <p>If none are correct, use concept_id = 0.</p> Please see **Note 1** for guidance.
`immunization_source_concept_id`| Yes |Yes|  Integer | A foreign key to an immunization concept that refers to the code used in the source |   <p>**If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0**</p> Please see **Note 1** for guidance.
`immunization_date`|  Yes |Yes|  Date | The date of the immunization.|This should be the date the immunization was administered. No date shifting.
`immunization_datetime`|  Yes |Yes|  Datetime | The time of the immunization. |This should be the date the immunization was administered. No date shifting. Full date and time. If there is no time associated with the date assert midnight.
`immunization_source_value`| Yes |Yes|  Varchar |  The immunization name as it appears in the source data. This code is mapped to a standard concept in the Standardized Vocabularies and the original code is, stored here for reference.| This is the name of the value as it appears in the source system. Please use the pipe delimiter "\|" when concatenating values. Please see **Note 1** for guidance.
`provider_id` | No | Provide When Available| BigInteger | A foreign key to the provider in the provider table who was responsible for the immunization.
`imm_route_concept_id`| No |Provide When Available| Integer | A foreign key that refers to a standard immunization administration route concept identifier in the Vocabulary. | <p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where domain_id='Route')</p> <p>select * from concept where domain_id='Route' and invalid_reason is null yields 70 valid concept_ids.</p> <p><ul><li>Within the set of 70 valid concept ids, duplicates may exist. If this is the case, use the standard concept (standard_concept='S') first for mapping and then the non-standard concept for all other cases</li></ul> If none are correct, use concept_id = 0. </p>
`immunization_dose`| No |Provide When Available| Float | Numerical value of immunization dose for this immunization record| |
`imm_dose_unit_concept_id`| No |Provide When Available| Integer | A foreign key to a predefined concept in the Standard Vocabularies reflecting the unit the immunization_dose value is expressed| <p> Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where vocabulary_id = UCUM)</p> select * from concept where vocabulary_id = 'UCUM' yields 971 valid concept_ids.|
`imm_dose_unit_source_value`| No|Provide When Available|  Varchar | The information about the immunization dose unit as detailed in the source ||
`imm_route_source_value`| No|Provide When Available|  Varchar |The information about the route of immunization as detailed in the source ||
`visit_occurrence_id`|No|Optional| BigInteger | A foreign key that refers to the visit associated with the immunization record.
`procedure_occurrence_id`|No|Optional| BigInteger | A foreign key that refers to the procedure associated with the immunization record.
`imm_recorded_date`|No| Provide when available| Date| The date the immunization was recorded.| This date is applicable for immunizations that have been reported by the patient and not administered at the visit. No date shifting.
`imm_recorded_datetime`|No| Provide when available|Datetime |The time the immunization was recorded.| This date and time is applicable for immunizations that have been reported by the patient and not administered at the visit. No date shifting.
`imm_manufacturer`|No| Provide when available| Varchar| The information about the immunization manufacturer||
`imm_lot_num`|No| Provide when available|Varchar|The information about the immunization lot number||
`imm_exp_date`|No| Provide when available|Date| The date of the immunization expiration.| No date shifting.|
`imm_exp_datetime`|No| Provide when available|Datetime| The date and time of the immunization expiration.| No date shifting.|
`immunization_type_concept_id`| 	Yes	| Yes| Integer| A foreign key that refers to source of immunization record.| <p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where vocabulary_id ='PEDSnet' and concept_class_id='Immunization Type') <p> The value set for PEDSnet includes: <ul><li>Internal administration(OD) = 2000001288 </li><li>External feed (EF) =2000001289  </li>Immunization Information Systems (IS) = 2000001290  <li>Patient Reported (PR) = 2000001291 </li><li>No Information: concept_id = 44814650 </li> <li>Unknown: concept_id = 44814653</li> <li>Other: concept_id = 44814649</li></ul></p>
`imm_body_site_concept_id`| 	Yes	| Yes| Integer| A foreign key that refers to the body site where the immunization was administered in the vocabulary.| <p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where domain_id ='Spec Anatomic Site')</p><p> select * from concept where domain_id ='Spec Anatomic Site' yields 38257 valid concept_ids. Flavors of null are also applicable: <ul><li>No Information: concept_id = 44814650 </li> <li>Unknown: concept_id = 44814653</li> <li>Other: concept_id = 44814649</li></ul></p><p> If none are correct, use concept_id = 0</p>
`imm_body_site_source_value`|No| Provide when available| Varchar| The body site where the immunization was administered in the source system. |

## 1.18 DEVICE_EXPOSURE

The 'Device' domain captures information about a person's exposure to a foreign physical object or instrument which is used for diagnostic or therapeutic purposes through a mechanism beyond chemical action. Devices include implantable objects (e.g. pacemakers, stents, artificial joints), medical equipment and supplies (e.g. bandages, crutches, syringes), other instruments used in medical procedures (e.g. sutures, defibrillators), ventilators and material used in clinical care (e.g. adhesives, body material, dental material, surgical material).

**Note 1**:

To record the mechanical ventilation status for the patient, please use the following conventions to insert records into the **device_exposure** table:

device_concept_id|concept_code|concept_name|ventilation type
---|---|---|---
4044008|	129121000|	Tracheostomy tube|invasive
4097216|	26412008|	Endotracheal tube|invasive
4138614|	425826004	|BiPAP oxygen nasal cannula| non-invasive
45761494|	467645007|	CPAP nasal oxygen cannula| non-invasive
4224038|336623009|Oxygen nasal cannula| non-invasive
4139525|426854004|High flow oxygen nasal cannula| non-invasive
45768222|	706226000	|Continuous positive airway pressure/Bilevel positive airway pressure mask| non-invasive
4222966|	336602003|	Oxygen mask|non-invasive
40493026|	449071006|	Mechanical ventilator (if unable to distinguish the type)| N/A


**Note 2**:

To record cardiac stent information to support the **NEST Cardiac studies**, please use the guidance located [here](https://github.com/PEDSnet/Data_Models/blob/master/PEDSnet/docs/NEST/NEST-CardiacStents.md) to insert records into the **device_exposure** table.

**Note 3**:

For sites particpating in the **CDM Ventilator Pilot**, please use the guidance located [here](https://github.com/PEDSnet/Data_Models/blob/master/PEDSnet/docs/CDM%20Ventilator%20Pilot/Ventilator%20Pilot%20Guidance.md) to insert records into the **device_exposure** table.

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`device_exposure_id`|	Yes|	Yes|	BigInteger|	A system-generated unique identifier for each Device Exposure.|This is not a value found in the EHR. Sites may choose to use a sequential value for this field.
`person_id`|	Yes|	Yes|	BigInteger|	A foreign key identifier to the Person who is subjected to the Device. The demographic details of that Person are stored in the PERSON table.|
`device_concept_id`|	Yes|	Yes|	Integer|	A foreign key that refers to a Standard Concept identifier in the Standardized Vocabularies belonging to the 'Device' domain.| **For PEDSnet 4.5, Please use one of the above guidance for mechnical ventilation and cardiac stents. For all other devices, use concept_id = 0.**
`device_exposure_start_date`|	Yes	|	Yes|	Date|	The date the Device or supply was applied or used.|No date shifting. Full date.
`device_exposure_start_datetime`|	Yes| Yes	| Datetime |	The date and time the Device or supply was applied or used.|No date shifting. Full date and time. If there is no time associated with the date assert midnight for the start time
`device_exposure_end_date`|	No|	No|	Date	|The date use of the Device or supply was ceased.|No date shifting. Full date.
`device_exposure_end_datetime`|	No|	No |	Datetime|	The date and time use of the Device or supply was ceased.| No date shifting. Full date.If there is no time associated with the date assert 11:59:59 pm for the end time
`device_type_concept_id`|	Yes| Yes|	Integer|	A foreign key to the predefined Concept identifier in the Standardized Vocabularies reflecting the type of Device Exposure recorded.|<p>select * from concept where concept_class_id='Device Type' yields 4 valid concept ids.</p><p> FOR PEDSnet CDM v4.6, all of our observations are coming from electronic health records so set this field to concept_id = 44818707 (observation recorded from EHR Detail). </p>
`unique_device_id`|	No	|	Provide when available|	Integer |	A UDI or equivalent identifying the instance of the Device used in the Person.|<p> The UDI field should only contain the device identifier (DI) and not the production identitier (PI) or any other patient specific information that would be considered PHI or enable someone to re-identify the patient. For more information on the device identifier (DI) and production identifier (PI) that typically correspond to the UDI, please see the [FDA UDI Guidance](https://www.fda.gov/medical-devices/unique-device-identification-system-udi-system/udi-basics). </p><p>For **NEST - cardiac stents** please supply the GTIN associated withe device.</p>
`production_id`|	NO	|	NO|	Integer |	The "PI" portion of the UDI (as described above).|DO NOT transmit to DCC
`quantity`|	No|	No| Integer |	The number of individual Devices used in the exposure.|
`provider_id`	|No |Provide when Available|	BigInteger |	A foreign key to the provider in the PROVIDER table who initiated or administered the Device.|
`visit_occurrence_id`	|No	|Provide when available| BigInteger |	A foreign key to the visit in the VISIT_OCCURRENCE table during which the Device was used.|
`device_source_value`	|Yes| Yes|	Varchar |	The source code for the Device as it appears in the source data. This code is mapped to a Standard Device Concept in the Standardized Vocabularies and the original code is stored here for reference. | Please include the device name and model number when populating this field, by using the pipe delimiter "\|" when concatenating values. **Example: Device Name "\|" Model Number**
`device_source_concept_id`	|Yes| Yes|	Integer |	A foreign key to a Device Concept that refers to the code used in the source.| If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0
`placement_concept_id`| 	Yes	| Yes| Integer| A foreign key that refers to the body site where the device was placed.| <p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where domain_id ='Spec Anatomic Site' and standard_concept='S' and vocabulary_id='SNOMED')</p> <p> **For NEST Cardiac Stents**, mapping guidance is available on the [Cardiac Stent Guidance](https://github.com/PEDSnet/Data_Models/blob/master/PEDSnet/docs/NEST/NEST-CardiacStents.md) page above.</p> <p> Flavors of null are also applicable: <ul><li>No Information: concept_id = 44814650 </li> <li>Unknown: concept_id = 44814653</li> <li>Other: concept_id = 44814649</li></ul></p><p> If none are correct, use concept_id = 0</p>
`placement_source_value`|No| Provide when available| Varchar| The body site where the device was placed in the source system. |
`unit_concept_id` | No |Provide When Available|  Integer | A foreign key to a standard concept identifier of device units in the Vocabulary. | <p>Please include valid concept ids (consistent with OMOP CDMv5). Predefined value set (valid concept_ids found in CONCEPT table where vocabulary_id = UCUM)</p> <p>select \* from concept where vocabulary_id = 'UCUM' </p> <p>If none are correct, use concept_id = 0.</p>
`unit_source_concept_id`| No| Provide When Available| Integer | A foreign key to a concept that refers to the code used in the source for the unit.| This is the concept id that maps to the source value in the standard vocabulary. <p>**If there is not a mapping for the source code in the standard vocabulary, use concept_id = 0**</p>
`unit_source_value`| No| Provide When Available| Varchar | The source code for the unit as it appears in the source data. This code is mapped to a standard unit concept in the Standardized Vocabularies and the original code is, stored here for reference.|

#### 1.18.1 Additional Notes
- For records that only have an explant date, assert the explant date as the start date. 
- For records that appear to be implants of the same device on the same date and time, sum the quantity amounts to avoid the appearance of duplicates in the data.

## 1.19 LOCATION_HISTORY

The 'Location_History' domain is intended to store historical location information for various domains persons, providers and care_sites. 

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`location_history_id` | Yes |Yes| BigInteger | A system-generated unique identifier for each Location History.|This is not a value found in the EHR. Sites may choose to use a sequential value for this field.
`location_id` | Yes |Yes| BigInteger | A foreign key to the location table.|
`relationship_type_concept_id` | Yes |Yes | Varchar | The type of relationship between location and entity.| At this time OMOP/OHDSI has not released a valid value set for this field.  **For PEDSNet v4.6, use concept_id = 0.**
`domain_id` | Yes |Yes| Varchar | The domain of the entity that is related to the location. Either PERSON, PROVIDER, or CARE_SITE.| For PEDSNet v4.6, only patient address histories are present in this table. Due to this **use domain_id = 'Person'** for all records.
`entity_id` | Yes |Yes| BigInteger| The unique identifier for the entity. References either person_id, provider_id, or care_site_id, depending on domain_id.|For PEDSNet v4.6, only patient address histories are present in this table. Due to this, please populate this field with the corresponding person_id.
`location_preferred_concept_id`| Yes | Yes| Integer | A foreign key that indicates if the location is the preferred location.| <p> For PEDSnet CDM v4.6, please use the following: <ul><li>Yes=4188539 </li><li>No=4188540</li><li>No Information: concept_id = 44814650 </li> <li>Unknown: concept_id = 44814653</li> <li>Other: concept_id = 44814649</li></ul> If none are correct, use concept_id = 0. </p>
`start_date` | Yes| Yes| Date | The date the relationship started.| No date shifting.
`start_datetime` | Yes| Yes| Datetime | The date the relationship started.| No date shifting.
`end_date` | No |No| Date | The date the relationship ended.| This field should be NULL for the current location of the entity. No date shifting.
`end_datetime` | No |No| Datetime | The date the relationship ended.|This field should be NULL for the current location of the entity. No date shifting. 

## 1.20 HASH_TOKEN

The 'Hash_Token' domain is intended to store encrypted and keyed secure hash tokens that are used to match patient records across DataMarts using privacy-preserving record linkage methods. This table requirement comes from the PCORnet data model.

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
 --- | --- | --- | --- | ---| ---
`person_id`| Yes |Yes| BigInteger| A foreign key identifier to the Person who is subjected to the Device. The demographic details of that Person are stored in the PERSON table.
`token_01`|No|Provide When Available|Varchar|Encrypted keyed hash generated from PII using token strategy 01 in Datavant DeID.
`token_02`|No|Provide When Available|Varchar|Encrypted keyed hash generated from PII using token strategy 02 in Datavant DeID
`token_03`|No|Provide When Available|Varchar|Encrypted keyed hash generated from PII using token strategy 03 in Datavant DeID
`token_04`|No|Provide When Available|Varchar|Encrypted keyed hash generated from PII using token strategy 04 in Datavant DeID
`token_05`|No|Provide When Available|Varchar| Encrypted keyed hash generated from PII using token strategy 05 in Datavant DeID
`token_16`|No|Provide When Available|Varchar|Encrypted keyed hash generated from PII using token strategy 16 in Datavant DeID
`token_encryption_key`|Yes|Yes|Varchar|The token encryption key used.| For sites submitting hashes to PEDSnet, the token encryption key coming out of the datavant software will resemble the following format <ul><li>sitename-pedsnet_TOKEN_ENCRYPTION_KEY</li></ul> Please follow this convention when submitting hashes to the PEDSnet network.

# 1.21 SPECIALTY

The 'Specialty' domain is intended to store specialty information for the domain of providers and care_sites. The table allows for ALL specialty data to be stored for a provider or care site, expanding from just primary specialty previously.

Field |NOT Null Constraint |Network Requirement |Data Type | Description | PEDSnet Conventions
--- | --- | --- | --- | ---| ---
`specialty_id`|Yes|Yes|BigInteger|A system-generated unique identifier for each Specialty record.|<p>This is not a value found in the EHR. Sites may choose to use a sequential value for this field.</p>
`domain_id`|Yes|Yes|Varchar|The domain of the entity that is related to the specialty. Either PROVIDER or CARE_SITE.|<p>For PEDSNet v4.6, we are only asking for Provider Specialty Records in this table.</p>
`entity_id`|Yes|Yes|BigInteger| The unique identifier for the entity. References either provider\_id or care\_site\_id depending on domain\_id.|<p>Any valid provider\_id or care\_site\_id allowed (see definition in PROVIDER or CARE\_SITE table).</p> 
`entity_type_concept_id `|Yes|Yes|Integer|concept_id that represents the hierarchical order of the specialty record as it is associated with the domain\_id  + entity\_id record (i.e. with the given PROVIDER or CARE\_SITE).|<p>Please use the following concept mappings when providing values for this field:</p><p>**Primary Specialty:** <li>concept\_id=4114681</li></p><p>**Secondary Specialty:**<li>concept\_id=4093903</li></p><p>**All Other Specialties:**<li>concept\_id=4225752</li></p><p>If information about this hierarchy is not available, please use your best judgement to assign this value.</p><p>**NOTE**: The `specialty_concept_id` for the Primary Specialty (i.e. the `entity_type_concept_id` = 4114681) record should match the value of the `specialty_concept_id` for the associated PROVIDER or CARE_SITE record.</p>
`specialty_concept_id`|Yes|Yes|Integer|A foreign key that refers to the given PROVIDER or CARE_SITE specialty.|See the specifications for the `specialty_concept_id` fields in either the [PROVIDER](https://github.com/PEDSnet/Data_Models/blob/master/PEDSnet/docs/PEDSnet_CDM_ETL_Conventions.md#15-provider-1) or [CARE\_SITE](https://github.com/PEDSnet/Data_Models/blob/master/PEDSnet/docs/PEDSnet_CDM_ETL_Conventions.md#14-care_site) specs for detailed guidance on which concept\_id's to use for this mapping (whichever one is relevant for the given `domain_id` you are inserting data for).<p>**NOTE**: The `specialty_concept_id` for the Primary Specialty (i.e. the `entity_type_concept_id` = 4114681) record should match the value of the `specialty_concept_id` for the associated PROVIDER or CARE\_SITE table record.</p>
`specialty_source_value`|Yes|Yes|Varchar |The Specialty Name as it appears in the source data.|This is the name of the value as it appears in the source system. Please use the pipe delimiter when concatenating values.

 
* * *

## ***APPENDIX***

**PEDSnet-specific is supported by OMOP-supported Vocabulary id=PCORNet, which contains all of the additional concept_id codes needed in PEDSnet for the PCORnet CDM**

### A1. ABMS Specialty Category to OMOP V5 Specialty Mapping
http://www.abms.org/member-boards/specialty-subspecialty-certificates/

ABMS Specialty Category | OMOP Supported Concept for Provider ID | OMOP Concept_name | Concept_class_id | Vocabulary id| Domain_id
--- | --- | --- | --- | --- | ---
Addiction Psychiatry |38004498 | Addiction Medicine | Physician Specialty| Medicare Specialty| Provider   
Adolescent Medicine |45756747 |Adolescent Medicine|Physician Specialty | ABMS | Provider
Adult Congenital Heart Disease |45756748  |Adult Congenital Heart Disease|Physician Specialty |  ABMS | Provider
Advanced Heart Failure and Transplant Cardiology |45756749 |Advanced Heart Failure and Transplant Cardiology|  Physician Specialty | ABMS | Provider
Aerospace Medicine |45756750 |Aerospace Medicine| Physician Specialty | ABMS | Provider
Allergy and Immunology | 38004448 | Allergy/Immunology                | Physician Specialty | Medicare Specialty | Provider    
Anesthesiology |38004450 | Anesthesiology   | Physician Specialty | Medicare Specialty | Provider    
Anesthesiology Critical Care Medicine |45756751 |Anesthesiology Critical Care Medicine|Physician Specialty | Medicare Specialty| Provider
Blood Banking/Transfusion Medicine |45756752|Blood Banking/Transfusion Medicine|Physician Specialty |  ABMS| Provider
Brain Injury Medicine |45756753 |Brain Injury Medicine|Physician Specialty |  ABMS| Provider
Cardiology |38004451 | Cardiology                       | Physician Specialty | Medicare Specialty | Provider 
Cardiovascular Disease |45756754 |Cardiovascular Disease|Physician Specialty |  ABMS| Provider
Child Abuse Pediatrics |45756755 |Child Abuse Pediatrics |Physician Specialty |  ABMS| Provider
Child and Adolescent Psychiatry |45756756|Child and Adolescent Psychiatry|Physician Specialty |  ABMS| Provider
Clinical Biochemical Genetics |45756757|Clinical Biochemical Genetics|Physician Specialty |  ABMS| Provider
Clinical Cardiac Electrophysiology |45756758|Clinical Cardiac Electrophysiology |Physician Specialty |  ABMS| Provider
Clinical Cytogenetics |45756759 |Clinical Cytogenetics|Physician Specialty |  ABMS| Provider
Clinical Genetics (MD) |45756760|Clinical Genetics (MD)|Physician Specialty |  ABMS| Provider
Clinical Informatics |45756761|Clinical Informatics|Physician Specialty |  ABMS| Provider
Clinical Molecular Genetics |45756762|Clinical Molecular Genetics|Physician Specialty |  ABMS| Provider
Clinical Neurophysiology |45756763|Clinical Neurophysiology |Physician Specialty |  ABMS| Provider
Colon and Rectal Surgery | 38004471 | Colorectal Surgery              | Physician Specialty | Medicare Specialty | Provider   
Complex General Surgical Oncology |45756764|Complex General Surgical Oncology| Physician Specialty | ABMS| Provider
Congenital Cardiac Surgery |45756765|Congenital Cardiac Surgery |Physician Specialty |  ABMS| Provider
Critical Care Medicine | 38004500 | Critical care (intensivist)      | Physician Specialty | Medicare Specialty | Provider    
Cytopathology |45756766|Cytopathology |Physician Specialty |  ABMS| Provider
Dermatology  |38004452 | Dermatology                        | Physician Specialty | Medicare Specialty | Provider    
Dermatopathology |45756767|Dermatopathology|Physician Specialty |  ABMS| Provider
Developmental-Behavioral Pediatrics |45756768|Developmental-Behavioral Pediatrics|Physician Specialty |  ABMS| Provider
Diagnostic Radiology |45756769|Diagnostic Radiology|Physician Specialty |  ABMS| Provider
Emergency Medical Services |45756770|Emergency Medical Services|Physician Specialty |  ABMS| Provider
Emergency Medicine | 38004510 | Emergency Medicine         | Physician Specialty | Medicare Specialty | Provider   
Endocrinology, Diabetes and Metabolism |45756771  |Endocrinology, Diabetes and Metabolism|Physician Specialty |  ABMS| Provider
Epilepsy |45756772   |Epilepsy|Physician Specialty |  ABMS| Provider
General Family Medicine | 38004453 | Family Practice                           | Physician Specialty | Medicare Specialty | Provider   
Female Pelvic Medicine and Reconstructive Surgery|45756773 |Female Pelvic Medicine and Reconstructive Surgery| Physician Specialty | ABMS| Provider
Forensic Psychiatry |45756775|Forensic Psychiatry|Physician Specialty |  ABMS| Provider
Gastroenterology |38004455 | Gastroenterology                    | Physician Specialty | Medicare Specialty | Provider  
General Pediatrics (Primary Care)* |2000000063 |General Pediatrics        | Specialty | PEDSNet | Provider   
Geriatric Medicine | 38004478 | Geriatric Medicine                   | Physician Specialty | Medicare Specialty | Provider   
Geriatric Psychiatry |45756776|Geriatric Psychiatry|Physician Specialty |  ABMS| Provider
Gynecologic Oncology |38004513 | Gynecology/Oncology              | Physician Specialty | Medicare Specialty | Provider    
Hematology | 38004501 | Hematology                           | Physician Specialty | Medicare Specialty | Provider   
Hospice and Pallative Medicine |45756777 |Hospice and Pallative Medicine|Physician Specialty |  ABMS| Provider
Infectious Disease | 38004484 | Infectious Disease                | Physician Specialty | Medicare Specialty | Provider   
General Internal Medicine | 38004456 | Internal Medicine| Physician Specialty | Medicare Specialty | Provider   
Internal Medicine - Critical Care Medicine |45756778|Internal Medicine - Critical Care Medicine|Physician Specialty |  ABMS| Provider
Interventional Cardiology |45756779 |Interventional Cardiology|Physician Specialty |  ABMS| Provider
Interventional Radiology and Diagnostic Radiology |38004511 | Interventional Radiology | Physician Specialty | Medicare Specialty | Provider   
Maternal and Fetal Medicine |45756780|Maternal and Fetal Medicine |Physician Specialty |  ABMS| Provider
Medical Biochemical Genetics |45756781|Medical Biochemical Genetics|Physician Specialty |  ABMS| Provider
Medical Genetics and Genomics |45756782 |Medical Genetics and Genomics|Physician Specialty |  ABMS| Provider
Medical Oncology |38004507 | Medical Oncology | Physician Specialty | Medicare Specialty | Provider   
Medical Physics |45756783|Medical Physics|Physician Specialty |  ABMS| Provider
Medical Toxicology|45756784|Medical Toxicology|Physician Specialty |  ABMS| Provider
Molecular Genetic Pathology |45756785|Molecular Genetic Pathology|Physician Specialty |  ABMS| Provider
Neonatal-Perinatal Medicine |45756786|Neonatal-Perinatal Medicine|Physician Specialty |  ABMS| Provider
Nephrology | 38004479 | Nephrology                   | Physician Specialty | Medicare Specialty | Provider   
Neurodevelopmental Disabilities |45756787|Neurodevelopmental Disabilities|Physician Specialty |  ABMS| Provider
Neurological Surgery | 38004459 | Neurosurgery                    | Physician Specialty | Medicare Specialty | Provider   
General Neurology | 38004458 | Neurology                                     | Physician Specialty | Medicare Specialty | Provider   
Neurology with Special Qualification in Child Neurology |45756788|Neurology with Special Qualification in Child Neurology|Physician Specialty |  ABMS| Provider
Neuromuscular Medicine |45756789|Neuromuscular Medicine|Physician Specialty |  ABMS| Provider
Neuropathology |45756790 |Neuropathology|Physician Specialty |  ABMS| Provider
Neuroradiology |45756791|Neuroradiology|Physician Specialty |  ABMS| Provider
Neurotology |45756792|Neurotology|Physician Specialty |  ABMS| Provider
Nuclear Medicine |38004476 | Nuclear Medicine                  | Physician Specialty | Medicare Specialty | Provider   
Nuclear Radiology |45756793 |Nuclear Radiology|Physician Specialty |  ABMS| Provider
Obstetrics and Gynecology | 38004461 | Obstetrics/Gynecology              | Physician Specialty | Medicare Specialty | Provider   
Occupational Medicine |38004492 | Occupational Therapy              | Physician Specialty | Medicare Specialty| Provider   
Ophthalmology |  38004463 | Ophthalmology                       | Physician Specialty | Medicare Specialty | Provider     
Orthopaedic Sports Medicine |45756794|Orthopaedic Sports Medicine|Physician Specialty |  ABMS| Provider
Orthopedics/Orthopaedic Surgery |38004465 |Orthopedics/Orthopedic Surgery                | Physician Specialty | Medcicare Specialty | Provider   
Otolaryngology | 38004449 | Otolaryngology                           | Physician Specialty | Medicare Specialty | Provider     
Pain Medicine | 38004494 | Pain Management                           | Physician Specialty | Medicare Specialty  | Provider    
Pathology |38004466 | Pathology                                  | Physician Specialty | Medicare Specialty   | Provider   
Pathology - Anatomic |45756795|Pathology - Anatomic| Physician Specialty | ABMS| Provider
Pathology - Chemical |45756796|Pathology - Chemical | Physician Specialty | ABMS| Provider
Pathology - Clinical |45756797|Pathology - Clinical| Physician Specialty | ABMS| Provider
Pathology - Forensic |45756798|Pathology - Forensic| Physician Specialty | ABMS| Provider
Pathology - Hematology |45756799|Pathology - Hematology| Physician Specialty | ABMS| Provider
Pathology - Medical Microbiology |45756800 |Pathology - Medical Microbiology| Physician Specialty | ABMS| Provider
Pathology - Molecular Genetic |45756801|Pathology - Molecular Genetic| Physician Specialty | ABMS| Provider
Pathology - Pediatric |45756802|Pathology - Pediatric | Physician Specialty | ABMS| Provider
Pathology-Anatomic/Pathology-Clinical |45756803|Pathology-Anatomic/Pathology-Clinical | Physician Specialty | ABMS| Provider
Pediatric Medicine** | 38004477 | Pediatric Medicine               | Physician Specialty | Medicare Specialty   | Provider   
Pediatric Anesthesiology |45756804|Pediatric Anesthesiology| Physician Specialty | ABMS| Provider
Pediatric Cardiology |45756805|Pediatric Cardiology | Physician Specialty | ABMS| Provider
Pediatric Critical Care Medicine |45756806|Pediatric Critical Care Medicine| Physician Specialty | ABMS| Provider
Pediatric Dermatology |45756807|Pediatric Dermatology| Physician Specialty | ABMS| Provider
Pediatric Emergency Medicine |45756808|Pediatric Emergency Medicine| Physician Specialty | ABMS| Provider
Pediatric Endocrinology |45756809|Pediatric Endocrinology| Physician Specialty | ABMS| Provider
Pediatric Gastroenterology |45756810 |Pediatric Gastroenterology | Physician Specialty | ABMS| Provider
Pediatric Hematology-Oncology |45756811 |Pediatric Hematology-Oncology| Physician Specialty | ABMS| Provider
Pediatric Infectious Diseases |45756812 |Pediatric Infectious Diseases| Physician Specialty | ABMS| Provider
Pediatric Nephrology |45756813 |Pediatric Nephrology| Physician Specialty | ABMS | Provider   
Pediatric Otolaryngology |45756814|Pediatric Otolaryngology | Physician Specialty | ABMS| Provider
Pediatric Pulmonology |45756815|Pediatric Pulmonology | Physician Specialty | ABMS| Provider
Pediatric Radiology |45756816|Pediatric Radiology| Physician Specialty | ABMS| Provider
Pediatric Rehabilitation Medicine |45756817|Pediatric Rehabilitation Medicine| Physician Specialty | ABMS| Provider
Pediatric Rheumatology |45756818|Pediatric Rheumatology| Physician Specialty | ABMS| Provider
Pediatric Surgery |45756819|Pediatric Surgery| Physician Specialty | ABMS| Provider
Pediatric Transplant Hepatology |45756820|Pediatric Transplant Hepatology | Physician Specialty | ABMS| Provider
Pediatric Urology|45756821|Pediatric Urology| Physician Specialty | ABMS| Provider
Physical Medicine and Rehabilitation |38004468 | Physical Medicine And Rehabilitation | Physician Specialty | Medicare Specialty  | Provider    
Plastic Surgery | 38004467 | Plastic And Reconstructive Surgery  | Physician Specialty | Medicare Specialty | Provider     
Plastic Surgery Within the Head and Neck |45756822|Plastic Surgery Within the Head and Neck| Physician Specialty | ABMS| Provider
Preventative Medicine | 38004503 | Preventive Medicine                | Physician Specialty | Medicare Specialty | Provider     
Psychiatry |38004469 | Psychiatry                             | Physician Specialty | Medicare Specialty   | Provider   
Psychosomatic Medicine |45756823 |Psychosomatic Medicine | Physician Specialty | ABMS| Provider
Public Health and General Preventive Medicine |45756824|Public Health and General Preventive Medicine| Physician Specialty | ABMS| Provider
Pulmonary Disease | 38004472 | Pulmonary Disease         | Physician Specialty | Medicare Specialty   | Provider   
Radiation Oncology |38004509 | Radiation Oncology    | Physician Specialty | Medicare Specialty  | Provider    
Radiology |45756825|Radiology| Physician Specialty | ABMS| Provider
Reproductive Endocrinology/Infertility |45756826|Reproductive Endocrinology/Infertility| Physician Specialty | ABMS| Provider
Rheumatology |38004491 | Rheumatology                  | Physician Specialty | Medicare Specialty   | Provider   
Sleep Medicine |45756827|Sleep Medicine| Physician Specialty | ABMS| Provider
Spinal Cord Injury Medicine| concept id requested |Spinal Cord Injury Medicine | Physician Specialty | ABMS|
Sports Medicine |45756828|Sports Medicine| Physician Specialty | ABMS| Provider
General Surgery | 38004447 | General Surgery            | Physician Specialty | Medicare Specialty   | Provider   
Surgery of the Hand | 38004480 | Hand Surgery                  | Physician Specialty | Medicare Specialty   | Provider   
Surgical Critical Care |45756829|Surgical Critical Care | Physician Specialty | ABMS| Provider
Thoracic Surgery | 38004473 | Thoracic Surgery                  | Physician Specialty | Medicare Specialty  | Provider      
Thoracic and Cardiac Surgery |45756830|Thoracic and Cardiac Surgery| Physician Specialty | ABMS| Provider
Transplant Hepatology |45756831|Transplant Hepatology| Physician Specialty | ABMS| Provider
Undersea and Hyperbaric Medicine |45756832 |Undersea and Hyperbaric Medicine| Physician Specialty | ABMS| Provider
Urology | 38004474 | Urology                                   | Physician Specialty | Medicare Specialty | Provider    
Vascular and Interventional Radiology |45756833|Vascular and Interventional Radiology| Physician Specialty | ABMS| Provider
Vascular Neurology |45756834|Vascular Neurology| Physician Specialty | ABMS| Provider
Vascular Surgery | 38004496 | Vascular Surgery           | Physician Specialty | Medicare Specialty   | Provider   


**NOTES:**
- General Pediatrics refers to Primary Care
- Pediatric Medicine refers to the default assignment if a site is unable to distinguish which pediatric specialty the care site or provider has an assigned

### A2. PEDSNet Person Language Concept Mapping Values

The below langauge listing is representative of the top 10 spoken languages of each of the 8 contributing sites. This list standard list will be used to map language values for consistency.

Language|concept_id|concept_name|domain_id|concept_class_id|standard_concept
---|---|---|---|---|---|
Amharic|4182354|Amharic language|Observation|Qualifier Value|S
Arabic|4181374|Arabic language| Observation|Qualifier Value|S
Bengali|4052786|Bengali language|Observation|Qualifier Value|S
Burmese|4181727|Burmese language|Observation|Qualifier Value|S
Bosnian|40481563|Bosnian language|Observation|Qualifier Value|S
Cape Verde Creole|44814649 | Other        | Observation | Undefined        |                  | 
Chinese|4182948|Chinese Language|Observation|Qualifier Value|S
Chinese(Cantonese)|4177463|Cantonese Chinese dialect|Observation|Qualifier Value|S
Chinese(Mandarin)| 4181724| Mandarin dialect | Observation|Qualifier Value|S
English|4180186|English Language|Observation|Qualifier Value|S
French|4180190|French Language|Observation|Qualifier Value|S
Haitian/Creole|44802876| Haitian Creole Language|Observation|Qualifier Value|S
Japanese|4181524|Japanese Language|Observation|Qualifier Value|S
Korean|4175771|Korean Language|Observation|Qualifier Value|S
Mandarin| 4181724| Mandarin dialect | Observation|Qualifier Value|S
Nepali|4175908|Nepali language|Observation|Qualifier Value|S
No information| 44814650 | No information|Observation | Undefined|S                                                                                                                            
None|44814650 | No information|Observation | Undefined|S                                   
null|44814650 | No information|Observation | Undefined|S                                   
Other|44814649 | Other        | Observation | Undefined        |                  | 
Other Language|44814649 | Other        | Observation | Undefined        |                  | 
Other/Unknown|44814649 | Other        | Observation | Undefined        |                  | 
Portuguese|4181536 | Portuguese language                                 | Observation | Qualifier Value  | S
Russian|4181539 | Russian language                    | Observation | Qualifier Value  | S  
Sign|40483152 | Sign language                                               | Observation        | Qualifier Value   | S
Sign Language|40483152 | Sign language                                               | Observation        | Qualifier Value   | S
Somali|4182350 | Somali language                    | Observation | Qualifier Value  | S
Spanish|4182511 | Spanish language                    | Observation | Qualifier Value  | S
Unable to Collect| 44814650 | No information|Observation | Undefined|S        
Unknown | 44814653 | Unknown|  Observation | Undefined|S      
Vietnamese|4181526 | Vietnamese language                    | Observation | Qualifier Value  | S



* * *
